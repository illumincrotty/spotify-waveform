var K=Object.defineProperty,G=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var U=(s,e,o)=>e in s?K(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,S=(s,e)=>{for(var o in e||(e={}))Y.call(e,o)&&U(s,o,e[o]);if(H)for(var o of H(e))F.call(e,o)&&U(s,o,e[o]);return s},P=(s,e)=>G(s,X(e));import{S as V,i as C,s as R,e as v,t as k,J as I,c as w,a as h,g as x,K as D,d as m,b as p,f as $,H as f,L as N,I as b,M as Q,A as Z,k as q,j as E,N as ee,n as y,m as z,o as L,x as M,u as T,v as A}from"../chunks/vendor-4aa6259f.js";import{P as te,S as oe}from"../chunks/page-676603f4.js";import{b as se,r as ne,a as O}from"../chunks/paths-e7257673.js";const ae=(s=32)=>crypto.getRandomValues(new Uint8Array(s)),j=(s=32)=>J(ae(s)),J=s=>window.btoa(String.fromCodePoint(...s)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),ie=async s=>{const e=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",e);return J(new Uint8Array(o))},re="https://accounts.spotify.com/authorize",ce="https://accounts.spotify.com/api/token",le=async(s=!1)=>{const e=j(64),o=j(64);let t={client_id:"9f38f4f91f784811b42898766ee7211a",redirect_uri:`https://illumincrotty.github.io${se}/authorized`,state:`${o}`,scope:"user-read-private user-top-read",response_type:s?"code":"token",show_dialog:"false"};s&&(t=P(S({},t),{code_challenge_method:"S256",code_challenge:await ie(e)}));const i=a=>a===o,n=()=>{ue(`${re}/?${new URLSearchParams(S({},t)).toString()}`,"Spotify Login",500,700)};return s?{login:n,verifyState:i,message:async a=>{const r=await fetch(ce,{method:"POST",body:new URLSearchParams({grant_type:"authorization_code",code:a,redirect_uri:t.redirect_uri,client_id:t.client_id,code_verifier:e})});if(r.ok){console.debug("Response good");const u=await r.json();return console.log(u),u}}}:{login:n,verifyState:i}},ue=(s,e,o,t)=>{var d,g,_,B;const i=(d=window.screenLeft)!=null?d:window.screenX,n=(g=window.screenTop)!=null?g:window.screenY,c=((_=window.innerWidth)!=null?_:document.documentElement.clientWidth)?document.documentElement.clientWidth:screen.width,a=((B=window.innerHeight)!=null?B:document.documentElement.clientHeight)?document.documentElement.clientHeight:screen.height,r=(c-o)/2+i,u=(a-t)/2+n,l=window.open(s,e,`scrollbars=yes,width=${o},height=${t},top=${u},left=${r}`);return"focus"in window&&(l==null||l.focus()),l},me=ne,W=de;async function de(s,e){return me.goto(s,e,[])}function fe(s){let e,o,t,i,n,c;return{c(){e=v("button"),o=k("Login to "),t=I("svg"),i=I("path"),this.h()},l(a){e=w(a,"BUTTON",{class:!0});var r=h(e);o=x(r,"Login to "),t=D(r,"svg",{xmlns:!0,viewBox:!0,class:!0});var u=h(t);i=D(u,"path",{d:!0}),h(i).forEach(m),u.forEach(m),r.forEach(m),this.h()},h(){p(i,"d","M183.376 100.689c-35.992-21.374-95.36-23.34-129.719-12.912-5.517 1.674-11.352-1.441-13.024-6.958-1.672-5.52 1.44-11.351 6.961-13.028 39.442-11.974 105.007-9.66 146.442 14.936 4.964 2.945 6.592 9.354 3.65 14.31-2.945 4.962-9.36 6.598-14.31 3.652zm-1.179 31.659c-2.524 4.097-7.881 5.381-11.973 2.867-30.007-18.445-75.763-23.788-111.263-13.013-4.604 1.391-9.466-1.204-10.864-5.8a8.717 8.717 0 015.805-10.857C94.456 93.24 144.869 99.2 179.333 120.38c4.092 2.52 5.38 7.88 2.864 11.968zm-13.662 30.404a6.953 6.953 0 01-9.568 2.316c-26.221-16.025-59.224-19.645-98.09-10.767a6.957 6.957 0 01-8.333-5.233 6.95 6.95 0 015.234-8.332c42.533-9.723 79.018-5.538 108.449 12.445a6.959 6.959 0 012.308 9.57zM117.328 1.702C55.662 1.703 5.67 51.693 5.67 113.359c0 61.671 49.992 111.66 111.658 111.66 61.668 0 111.657-49.989 111.657-111.66 0-61.666-49.989-111.655-111.657-111.655M309.452 104.781c-19.279-4.597-22.712-7.824-22.712-14.602 0-6.407 6.032-10.716 15-10.716 8.693 0 17.312 3.273 26.35 10.012.274.204.617.285.954.232.337-.051.635-.235.833-.515l9.414-13.27c.386-.545.281-1.3-.24-1.717-10.756-8.63-22.868-12.826-37.026-12.826-20.816 0-35.356 12.49-35.356 30.365 0 19.167 12.543 25.953 34.218 31.192 18.448 4.25 21.561 7.809 21.561 14.174 0 7.051-6.296 11.435-16.428 11.435-11.252 0-20.432-3.79-30.7-12.682a1.331 1.331 0 00-.927-.302c-.338.028-.649.186-.865.445l-10.555 12.562c-.442.521-.386 1.3.124 1.75 11.948 10.666 26.64 16.3 42.496 16.3 22.431 0 36.926-12.257 36.926-31.226 0-16.032-9.579-24.898-33.067-30.61M409.55 126.268c0 13.537-8.34 22.984-20.28 22.984-11.803 0-20.707-9.876-20.707-22.984 0-13.106 8.904-22.983 20.708-22.983 11.748 0 20.278 9.663 20.278 22.983zm-16.283-40.5c-9.723 0-17.698 3.83-24.274 11.676v-8.832c0-.697-.565-1.265-1.262-1.265h-17.262c-.697 0-1.261.568-1.261 1.265v98.136c0 .697.564 1.265 1.261 1.265h17.262c.697 0 1.262-.568 1.262-1.265v-30.976c6.578 7.381 14.554 10.987 24.274 10.987 18.065 0 36.353-13.907 36.353-40.491 0-26.59-18.288-40.5-36.353-40.5M476.497 149.393c-12.374 0-21.704-9.942-21.704-23.125 0-13.238 9.007-22.845 21.419-22.845 12.455 0 21.847 9.942 21.847 23.134 0 13.236-9.068 22.836-21.562 22.836zm0-63.625c-23.265 0-41.492 17.915-41.492 40.789 0 22.626 18.102 40.353 41.207 40.353 23.348 0 41.63-17.855 41.63-40.642 0-22.71-18.157-40.5-41.345-40.5M567.525 87.347H548.53V67.925c0-.697-.562-1.264-1.26-1.264h-17.26c-.698 0-1.266.567-1.266 1.264v19.422h-8.3c-.696 0-1.258.568-1.258 1.265v14.836a1.26 1.26 0 001.258 1.264h8.3v38.39c0 15.513 7.721 23.378 22.949 23.378 6.192 0 11.33-1.279 16.17-4.024a1.26 1.26 0 00.64-1.095v-14.127a1.268 1.268 0 00-1.83-1.134c-3.325 1.673-6.54 2.445-10.133 2.445-5.538 0-8.01-2.513-8.01-8.149v-35.684h18.996c.698 0 1.259-.567 1.259-1.264V88.612c0-.697-.561-1.265-1.259-1.265M595.34 87.347h-17.263c-.697 0-1.264.568-1.264 1.265v75.313c0 .698.567 1.264 1.264 1.264h17.263c.696 0 1.264-.566 1.264-1.264V88.612c0-.697-.568-1.265-1.264-1.265M586.796 53.055c-6.837 0-12.388 5.537-12.388 12.374 0 6.843 5.55 12.386 12.388 12.386 6.836 0 12.38-5.543 12.38-12.386 0-6.837-5.544-12.374-12.38-12.374M633.708 87.423v-2.386c0-7.017 2.69-10.146 8.725-10.146 3.599 0 6.49.714 9.727 1.794a1.262 1.262 0 001.66-1.202V60.936a1.26 1.26 0 00-.892-1.21c-3.42-1.018-7.796-2.063-14.348-2.063-15.945 0-24.372 8.978-24.372 25.956v3.653h-8.293c-.696 0-1.267.567-1.267 1.264v14.912c0 .697.57 1.264 1.267 1.264h8.293v59.213c0 .698.563 1.264 1.259 1.264h17.261c.697 0 1.265-.566 1.265-1.264v-59.213h16.118L674.8 163.91c-2.803 6.22-5.559 7.457-9.321 7.457-3.042 0-6.244-.908-9.519-2.7a1.293 1.293 0 00-1.005-.095c-.33.117-.607.362-.747.683l-5.85 12.836a1.255 1.255 0 00.542 1.633c6.108 3.308 11.623 4.72 18.436 4.72 12.747 0 19.792-5.939 26.004-21.912l29.948-77.387a1.262 1.262 0 00-1.172-1.723h-17.97c-.538 0-1.02.342-1.197.847l-18.409 52.584-20.164-52.618a1.258 1.258 0 00-1.179-.812h-29.489M738.732 94.838h-3.163v4.034h3.163c1.579 0 2.521-.773 2.521-2.018 0-1.312-.942-2.016-2.521-2.016zm2.05 5.754l3.437 4.811h-2.898l-3.093-4.413h-2.659v4.413h-2.425V92.651h5.687c2.961 0 4.91 1.516 4.91 4.067 0 2.09-1.208 3.368-2.958 3.874zm-2.693-12.184c-6.222 0-10.932 4.945-10.932 11.004 0 6.054 4.676 10.934 10.868 10.934 6.222 0 10.935-4.943 10.935-11.004 0-6.054-4.679-10.934-10.87-10.934zm-.064 23.153c-6.832 0-12.148-5.487-12.148-12.15S731.263 87.2 738.09 87.2c6.831 0 12.148 5.486 12.148 12.143 0 6.664-5.381 12.22-12.212 12.22"),p(t,"xmlns","http://www.w3.org/2000/svg"),p(t,"viewBox","0 0 755.907 226.72"),p(t,"class","svelte-1swvwb7"),p(e,"class","svelte-1swvwb7")},m(a,r){$(a,e,r),f(e,o),f(e,t),f(t,i),n||(c=[N(window,"message",s[1]),N(e,"click",s[3])],n=!0)},p:b,i:b,o:b,d(a){a&&m(e),n=!1,Q(c)}}}function he(s,e,o){let t,{pkce:i=!0}=e;Z(()=>{le(i).then(a=>{o(0,t=a)})});const n=a=>{if(console.log("window message"),console.log(a),typeof a.data=="string"){const r=new URLSearchParams(a.data);i?t.verifyState(r.get("state"))?t.message(r.get("code")).then(u=>{const l={access_token:u.access_token,refresh_token:u.refresh_token,expires_at:Date.now()+1e3*+u.expires_in};console.log(l),sessionStorage.setItem("token_set",JSON.stringify(l)),W(`${O}/generator`)}):console.error("State is not verifiable"):t.verifyState(r.get("state"))&&r.get("access_token")&&(sessionStorage.setItem("token_set",JSON.stringify({access_token:r.get("access_token"),expires_at:Date.now()+1e3*+r.get("expires_in")})),W(`${O}/generator`))}},c=()=>{t.login()};return s.$$set=a=>{"pkce"in a&&o(2,i=a.pkce)},[t,n,i,c]}class pe extends V{constructor(e){super();C(this,e,he,fe,R,{pkce:2})}}function ge(s){let e,o,t,i,n,c,a,r,u;return n=new oe({}),{c(){e=v("div"),o=v("h2"),t=k("Theme:"),i=q(),E(n.$$.fragment),c=q(),a=v("p"),r=k(`A simple tool to generate artwork based off spotify tracks. Lorem
			ipsum dolor sit amet consectetur adipisicing elit. Asperiores, non
			praesentium minus consequatur, commodi iste tempora laborum eos nisi
			eveniet officiis ab doloribus error in, soluta neque. Totam, nihil
			enim. Mollitia, nobis quis hic ut eaque fugiat animi repellat saepe
			officiis, quidem officia repudiandae corporis non numquam tempore.
			Et quam repudiandae laudantium reiciendis nihil a, numquam inventore
			error aspernatur recusandae voluptas ratione consequatur dolores ab
			soluta sit tempore, quasi vel amet maiores labore odio? Itaque
			delectus sequi aliquam eius quibusdam libero porro molestiae nihil
			repellendus, est voluptate, officia blanditiis recusandae aliquid
			eaque fuga ipsa consequatur hic iure numquam sapiente tempore.`),this.h()},l(l){e=w(l,"DIV",{});var d=h(e);o=w(d,"H2",{});var g=h(o);t=x(g,"Theme:"),g.forEach(m),i=y(d),z(n.$$.fragment,d),c=y(d),a=w(d,"P",{class:!0});var _=h(a);r=x(_,`A simple tool to generate artwork based off spotify tracks. Lorem
			ipsum dolor sit amet consectetur adipisicing elit. Asperiores, non
			praesentium minus consequatur, commodi iste tempora laborum eos nisi
			eveniet officiis ab doloribus error in, soluta neque. Totam, nihil
			enim. Mollitia, nobis quis hic ut eaque fugiat animi repellat saepe
			officiis, quidem officia repudiandae corporis non numquam tempore.
			Et quam repudiandae laudantium reiciendis nihil a, numquam inventore
			error aspernatur recusandae voluptas ratione consequatur dolores ab
			soluta sit tempore, quasi vel amet maiores labore odio? Itaque
			delectus sequi aliquam eius quibusdam libero porro molestiae nihil
			repellendus, est voluptate, officia blanditiis recusandae aliquid
			eaque fuga ipsa consequatur hic iure numquam sapiente tempore.`),_.forEach(m),d.forEach(m),this.h()},h(){p(a,"class","centered")},m(l,d){$(l,e,d),f(e,o),f(o,t),f(e,i),L(n,e,null),f(e,c),f(e,a),f(a,r),u=!0},i(l){u||(M(n.$$.fragment,l),u=!0)},o(l){T(n.$$.fragment,l),u=!1},d(l){l&&m(e),A(n)}}}function _e(s){let e,o;return e=new pe({props:{slot:"main-bottom"}}),{c(){E(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,i){L(e,t,i),o=!0},p:b,i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){T(e.$$.fragment,t),o=!1},d(t){A(e,t)}}}function ve(s){let e;return{c(){e=v("div"),this.h()},l(o){e=w(o,"DIV",{slot:!0}),h(e).forEach(m),this.h()},h(){p(e,"slot","footer")},m(o,t){$(o,e,t)},d(o){o&&m(e)}}}function we(s){let e,o,t,i;return t=new te({props:{title:"Spotify Data",$$slots:{footer:[ve],"main-bottom":[_e],default:[ge]},$$scope:{ctx:s}}}),{c(){e=q(),o=q(),E(t.$$.fragment),this.h()},l(n){ee('[data-svelte="svelte-1fzxoal"]',document.head).forEach(m),e=y(n),o=y(n),z(t.$$.fragment,n),this.h()},h(){document.title="Spotify Waveforms"},m(n,c){$(n,e,c),$(n,o,c),L(t,n,c),i=!0},p(n,[c]){const a={};c&1&&(a.$$scope={dirty:c,ctx:n}),t.$set(a)},i(n){i||(M(t.$$.fragment,n),i=!0)},o(n){T(t.$$.fragment,n),i=!1},d(n){n&&m(e),n&&m(o),A(t,n)}}}class Se extends V{constructor(e){super();C(this,e,null,we,R,{})}}export{Se as default};
