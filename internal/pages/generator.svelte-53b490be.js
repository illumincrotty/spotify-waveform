var ke=Object.defineProperty;var x=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ee=(a,e,l)=>e in a?ke(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l,F=(a,e)=>{for(var l in e||(e={}))ve.call(e,l)&&ee(a,l,e[l]);if(x)for(var l of x(e))ge.call(e,l)&&ee(a,l,e[l]);return a};import{S as te,i as le,s as re,e as E,t as P,k as H,c as A,a as D,g as V,n as j,d as m,b as d,O as B,f as T,H as b,L as N,h as O,U as ae,V as ne,I as L,Q,M as ye,W as we,j as W,N as Ee,m as X,o as Y,x as I,u as S,v as Z,A as Ae,l as M,X as q,Y as oe,r as G,w as K,R as se,Z as R,_ as z,$ as ie}from"../chunks/vendor-4aa6259f.js";import{P as De}from"../chunks/page-676603f4.js";const Te=a=>a?`?${Object.entries(a).map(e=>e[0]&&e[1]?`${e[0]}=${Array.isArray(e[1])?e[1].join(","):e[1]}`:"").join("&")}`:"",Ie="https://api.spotify.com/v1",Le=a=>{console.log(a.access_token);const e=new Headers({Authorization:`Bearer ${a.access_token}`}),l=async o=>{var s;return(await fetch(`${Ie}${o.route}${Te(o.options)}`,{method:`${(s=o==null?void 0:o.method)!=null?s:"GET"}`,headers:e})).json()},n={me:async()=>l({route:"/me"}),topTracks:async o=>l({route:"/me/top/tracks",options:o}),topArtists:async o=>l({route:"/me/top/artists",options:o}),user:async o=>l({route:`/users/${o}`}),followedArtists:async o=>l({route:"/me/following",options:F({type:"artist"},o)}),followedArtistsCheck:async o=>l({route:"/me/following/contains",options:o}),followsPlaylistCheck:async(o,r)=>l({route:`/playlists/${o}/followers/contains`,options:r})},t={track:async o=>l({route:`/track/${o}`}),tracks:async o=>l({route:"/tracks",options:o}),savedTracks:async o=>l({route:"/me/tracks",options:o})};return F(F({},n),t)};function ce(a,e,l){const n=a.slice();return n[15]=e[l],n[17]=l,n}function ue(a){let e,l=a[15].label+"",n,t,o,r,s,i;function h(){return a[10](a[17])}return{c(){e=E("div"),n=P(l),t=H(),this.h()},l(u){e=A(u,"DIV",{value:!0,"aria-selected":!0,role:!0,class:!0,id:!0});var f=D(e);n=V(f,l),t=j(f),f.forEach(m),this.h()},h(){d(e,"value",o=a[15].value),d(e,"aria-selected","true"),d(e,"role","option"),d(e,"class","ds-option svelte-o3bmey"),d(e,"id",r=""+(a[1]+"-option-"+a[17])),B(e,"option-current",a[7]===a[17])},m(u,f){T(u,e,f),b(e,n),b(e,t),s||(i=N(e,"click",h),s=!0)},p(u,f){a=u,f&8&&l!==(l=a[15].label+"")&&O(n,l),f&8&&o!==(o=a[15].value)&&d(e,"value",o),f&2&&r!==(r=""+(a[1]+"-option-"+a[17]))&&d(e,"id",r),f&128&&B(e,"option-current",a[7]===a[17])},d(u){u&&m(e),s=!1,i()}}}function Se(a){let e,l,n,t,o,r,s,i=(a[4]!==-1?a[3][a[4]].label:a[2])+"",h,u,f,_,p,k,v,C=a[3],g=[];for(let c=0;c<C.length;c+=1)g[c]=ue(ce(a,C,c));return{c(){e=E("label"),l=P(a[0]),n=P(" -"),o=H(),r=E("div"),s=E("span"),h=P(i),f=H(),_=E("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=A(c,"LABEL",{for:!0,id:!0,class:!0});var w=D(e);l=V(w,a[0]),n=V(w," -"),w.forEach(m),o=j(c),r=A(c,"DIV",{class:!0,id:!0});var y=D(r);s=A(y,"SPAN",{"aria-controls":!0,"aria-haspopup":!0,role:!0,tabindex:!0,class:!0,"aria-activedescendant":!0});var U=D(s);h=V(U,i),U.forEach(m),f=j(y),_=A(y,"DIV",{role:!0,tabindex:!0,class:!0,id:!0,"aria-expanded":!0});var $=D(_);for(let J=0;J<g.length;J+=1)g[J].l($);$.forEach(m),y.forEach(m),this.h()},h(){d(e,"for",a[1]),d(e,"id",t=""+(a[1]+"-label")),d(e,"class","ds-label svelte-o3bmey"),d(s,"aria-controls","listbox"),d(s,"aria-haspopup","listbox"),d(s,"role","combobox"),d(s,"tabindex","0"),d(s,"class","ds-input svelte-o3bmey"),d(s,"aria-activedescendant",u=""+(a[1]+"-option-"+(a[7]>=0?a[7]:a[4]))),d(_,"role","listbox"),d(_,"tabindex","-1"),d(_,"class","ds-menu svelte-o3bmey"),d(_,"id",p=""+(a[1]+"-menu")),d(_,"aria-expanded",a[6]),B(_,"open",a[6]),d(r,"class","ds-main ds-select svelte-o3bmey"),d(r,"id",a[1]),B(r,"open",a[6])},m(c,w){T(c,e,w),b(e,l),b(e,n),T(c,o,w),T(c,r,w),b(r,s),b(s,h),b(r,f),b(r,_);for(let y=0;y<g.length;y+=1)g[y].m(_,null);k||(v=[N(_,"mousedown",a[11]),N(_,"mouseup",a[12]),N(r,"click",ae(ne(a[13]))),N(r,"blur",ae(ne(a[8])),!0),N(r,"keydown",a[9])],k=!0)},p(c,[w]){if(w&1&&O(l,c[0]),w&2&&d(e,"for",c[1]),w&2&&t!==(t=""+(c[1]+"-label"))&&d(e,"id",t),w&28&&i!==(i=(c[4]!==-1?c[3][c[4]].label:c[2])+"")&&O(h,i),w&146&&u!==(u=""+(c[1]+"-option-"+(c[7]>=0?c[7]:c[4])))&&d(s,"aria-activedescendant",u),w&154){C=c[3];let y;for(y=0;y<C.length;y+=1){const U=ce(c,C,y);g[y]?g[y].p(U,w):(g[y]=ue(U),g[y].c(),g[y].m(_,null))}for(;y<g.length;y+=1)g[y].d(1);g.length=C.length}w&2&&p!==(p=""+(c[1]+"-menu"))&&d(_,"id",p),w&64&&d(_,"aria-expanded",c[6]),w&64&&B(_,"open",c[6]),w&2&&d(r,"id",c[1]),w&64&&B(r,"open",c[6])},i:L,o:L,d(c){c&&m(e),c&&m(o),c&&m(r),Q(g,c),k=!1,ye(v)}}}function Pe(a,e,l){const n=we();let{name:t="select"}=e,{id:o="example"}=e,{placeHolder:r=void 0}=e,{options:s}=e,i=!1,h=r?typeof r=="string"?-1:r:0,u=!1,f=-1;const _=()=>{if(i){l(5,i=!1);return}u&&!i&&l(6,u=!1)},p=c=>{if(u)switch(c.key){case" ":case"Enter":c.preventDefault(),l(4,h=f),l(6,u=!1);break;case"ArrowUp":{c.preventDefault(),f-1>=0&&l(7,f-=1);break}case"Tab":if(c.shiftKey){c.preventDefault(),f-1>=0&&l(7,f-=1);break}case"ArrowDown":{c.preventDefault(),f+1<s.length&&l(7,f+=1);break}case"Escape":c.preventDefault(),l(6,u=!1);break}else switch(c.key){case"ArrowUp":case"ArrowDown":case" ":case"Enter":c.preventDefault(),l(6,u=!0),l(7,f=h);break}},k=c=>{h!==c&&l(4,h=c)},v=()=>{l(5,i=!0)},C=()=>{l(5,i=!1)},g=()=>{l(7,f=-1),l(6,u=!u)};return a.$$set=c=>{"name"in c&&l(0,t=c.name),"id"in c&&l(1,o=c.id),"placeHolder"in c&&l(2,r=c.placeHolder),"options"in c&&l(3,s=c.options)},a.$$.update=()=>{a.$$.dirty&24&&h>=0&&h<s.length&&n("change",s[h])},[t,o,r,s,h,i,u,f,_,p,k,v,C,g]}class fe extends te{constructor(e){super();le(this,e,Pe,Se,re,{name:0,id:1,placeHolder:2,options:3})}}function _e(a,e,l){const n=a.slice();return n[6]=e[l],n}function he(a,e,l){const n=a.slice();return n[10]=e[l],n}function de(a){let e,l,n,t={ctx:a,current:null,token:null,hasCatch:!0,pending:He,then:Ce,catch:Ve,value:9,blocks:[,,,]};return q(l=a[2],t),{c(){e=M(),t.block.c()},l(o){e=M(),t.block.l(o)},m(o,r){T(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(o,r){a=o,t.ctx=a,r&4&&l!==(l=a[2])&&q(l,t)||oe(t,a,r)},i(o){n||(I(t.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=t.blocks[r];S(s)}n=!1},d(o){o&&m(e),t.block.d(o),t.token=null,t=null}}}function Ve(a){let e,l;return{c(){e=E("div"),l=P("Failure")},l(n){e=A(n,"DIV",{});var t=D(e);l=V(t,"Failure"),t.forEach(m)},m(n,t){T(n,e,t),b(e,l)},p:L,i:L,o:L,d(n){n&&m(e)}}}function Ce(a){let e,l,n=a[9].items,t=[];for(let r=0;r<n.length;r+=1)t[r]=me(he(a,n,r));const o=r=>S(t[r],1,1,()=>{t[r]=null});return{c(){e=E("ul");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=A(r,"UL",{});var s=D(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(m)},m(r,s){T(r,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(r,s){if(s&4){n=r[9].items;let i;for(i=0;i<n.length;i+=1){const h=he(r,n,i);t[i]?(t[i].p(h,s),I(t[i],1)):(t[i]=me(h),t[i].c(),I(t[i],1),t[i].m(e,null))}for(G(),i=n.length;i<t.length;i+=1)o(i);K()}},i(r){if(!l){for(let s=0;s<n.length;s+=1)I(t[s]);l=!0}},o(r){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)S(t[s]);l=!1},d(r){r&&m(e),Q(t,r)}}}function me(a){let e,l,n=a[10].name+"",t,o,r,s,i=a[10].artists[0].name+"",h,u,f,_,p;return{c(){e=E("li"),l=E("a"),t=P(n),r=P(`
								by
								`),s=E("a"),h=P(i),f=H(),this.h()},l(k){e=A(k,"LI",{class:!0});var v=D(e);l=A(v,"A",{href:!0});var C=D(l);t=V(C,n),C.forEach(m),r=V(v,`
								by
								`),s=A(v,"A",{href:!0});var g=D(s);h=V(g,i),g.forEach(m),f=j(v),v.forEach(m),this.h()},h(){d(l,"href",o=a[10].external_urls.spotify),d(s,"href",u=a[10].artists[0].external_urls.spotify),d(e,"class","svelte-1u1rp16")},m(k,v){T(k,e,v),b(e,l),b(l,t),b(e,r),b(e,s),b(s,h),b(e,f),p=!0},p(k,v){(!p||v&4)&&n!==(n=k[10].name+"")&&O(t,n),(!p||v&4&&o!==(o=k[10].external_urls.spotify))&&d(l,"href",o),(!p||v&4)&&i!==(i=k[10].artists[0].name+"")&&O(h,i),(!p||v&4&&u!==(u=k[10].artists[0].external_urls.spotify))&&d(s,"href",u)},i(k){p||(se(()=>{_||(_=R(e,z,{delay:0,duration:500},!0)),_.run(1)}),p=!0)},o(k){_||(_=R(e,z,{delay:0,duration:500},!1)),_.run(0),p=!1},d(k){k&&m(e),k&&_&&_.end()}}}function He(a){let e,l;return{c(){e=E("div"),l=P("Loading...")},l(n){e=A(n,"DIV",{});var t=D(e);l=V(t,"Loading..."),t.forEach(m)},m(n,t){T(n,e,t),b(e,l)},p:L,i:L,o:L,d(n){n&&m(e)}}}function pe(a){let e,l,n,t={ctx:a,current:null,token:null,hasCatch:!0,pending:Ne,then:Be,catch:je,value:5,blocks:[,,,]};return q(l=a[1],t),{c(){e=M(),t.block.c()},l(o){e=M(),t.block.l(o)},m(o,r){T(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(o,r){a=o,t.ctx=a,r&2&&l!==(l=a[1])&&q(l,t)||oe(t,a,r)},i(o){n||(I(t.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const s=t.blocks[r];S(s)}n=!1},d(o){o&&m(e),t.block.d(o),t.token=null,t=null}}}function je(a){let e,l;return{c(){e=E("div"),l=P("Failure")},l(n){e=A(n,"DIV",{});var t=D(e);l=V(t,"Failure"),t.forEach(m)},m(n,t){T(n,e,t),b(e,l)},p:L,i:L,o:L,d(n){n&&m(e)}}}function Be(a){let e,l,n=a[5].items,t=[];for(let r=0;r<n.length;r+=1)t[r]=be(_e(a,n,r));const o=r=>S(t[r],1,1,()=>{t[r]=null});return{c(){e=E("ul");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=A(r,"UL",{});var s=D(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(m)},m(r,s){T(r,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(r,s){if(s&2){n=r[5].items;let i;for(i=0;i<n.length;i+=1){const h=_e(r,n,i);t[i]?(t[i].p(h,s),I(t[i],1)):(t[i]=be(h),t[i].c(),I(t[i],1),t[i].m(e,null))}for(G(),i=n.length;i<t.length;i+=1)o(i);K()}},i(r){if(!l){for(let s=0;s<n.length;s+=1)I(t[s]);l=!0}},o(r){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)S(t[s]);l=!1},d(r){r&&m(e),Q(t,r)}}}function be(a){let e,l,n=a[6].name+"",t,o,r,s,i;return{c(){e=E("li"),l=E("a"),t=P(n),r=H(),this.h()},l(h){e=A(h,"LI",{class:!0});var u=D(e);l=A(u,"A",{href:!0});var f=D(l);t=V(f,n),f.forEach(m),r=j(u),u.forEach(m),this.h()},h(){d(l,"href",o=a[6].external_urls.spotify),d(e,"class","svelte-1u1rp16")},m(h,u){T(h,e,u),b(e,l),b(l,t),b(e,r),i=!0},p(h,u){a=h,(!i||u&2)&&n!==(n=a[6].name+"")&&O(t,n),(!i||u&2&&o!==(o=a[6].external_urls.spotify))&&d(l,"href",o)},i(h){i||(se(()=>{s||(s=R(e,z,{delay:0,duration:500,easing:ie},!0)),s.run(1)}),i=!0)},o(h){s||(s=R(e,z,{delay:0,duration:500,easing:ie},!1)),s.run(0),i=!1},d(h){h&&m(e),h&&s&&s.end()}}}function Ne(a){let e,l;return{c(){e=E("div"),l=P("Loading...")},l(n){e=A(n,"DIV",{});var t=D(e);l=V(t,"Loading..."),t.forEach(m)},m(n,t){T(n,e,t),b(e,l)},p:L,i:L,o:L,d(n){n&&m(e)}}}function Oe(a){let e,l,n,t,o,r,s,i,h;n=new fe({props:{name:"Top Tracks",id:"top-tracks",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),n.$on("change",a[3]);let u=a[2]instanceof Promise&&de(a);s=new fe({props:{name:"Top Artists",id:"top-artists",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),s.$on("change",a[4]);let f=a[1]instanceof Promise&&pe(a);return{c(){e=E("div"),l=E("section"),W(n.$$.fragment),t=H(),u&&u.c(),o=H(),r=E("section"),W(s.$$.fragment),i=H(),f&&f.c(),this.h()},l(_){e=A(_,"DIV",{id:!0,class:!0});var p=D(e);l=A(p,"SECTION",{class:!0});var k=D(l);X(n.$$.fragment,k),t=j(k),u&&u.l(k),k.forEach(m),o=j(p),r=A(p,"SECTION",{class:!0});var v=D(r);X(s.$$.fragment,v),i=j(v),f&&f.l(v),v.forEach(m),p.forEach(m),this.h()},h(){d(l,"class","svelte-1u1rp16"),d(r,"class","svelte-1u1rp16"),d(e,"id","top"),d(e,"class","svelte-1u1rp16")},m(_,p){T(_,e,p),b(e,l),Y(n,l,null),b(l,t),u&&u.m(l,null),b(e,o),b(e,r),Y(s,r,null),b(r,i),f&&f.m(r,null),h=!0},p(_,p){_[2]instanceof Promise?u?(u.p(_,p),p&4&&I(u,1)):(u=de(_),u.c(),I(u,1),u.m(l,null)):u&&(G(),S(u,1,1,()=>{u=null}),K()),_[1]instanceof Promise?f?(f.p(_,p),p&2&&I(f,1)):(f=pe(_),f.c(),I(f,1),f.m(r,null)):f&&(G(),S(f,1,1,()=>{f=null}),K())},i(_){h||(I(n.$$.fragment,_),I(u),I(s.$$.fragment,_),I(f),h=!0)},o(_){S(n.$$.fragment,_),S(u),S(s.$$.fragment,_),S(f),h=!1},d(_){_&&m(e),Z(n),u&&u.d(),Z(s),f&&f.d()}}}function Ue(a){let e,l,n,t;return n=new De({props:{title:"Top Spotify info",$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){e=H(),l=H(),W(n.$$.fragment),this.h()},l(o){Ee('[data-svelte="svelte-1998kk8"]',document.head).forEach(m),e=j(o),l=j(o),X(n.$$.fragment,o),this.h()},h(){document.title="Top Spotify info"},m(o,r){T(o,e,r),T(o,l,r),Y(n,o,r),t=!0},p(o,[r]){const s={};r&8199&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){t||(I(n.$$.fragment,o),t=!0)},o(o){S(n.$$.fragment,o),t=!1},d(o){o&&m(e),o&&m(l),Z(n,o)}}}function Fe(a,e,l){let n,t,o;return Ae(()=>{var h;const i=JSON.parse((h=sessionStorage.getItem("token_set"))!=null?h:"");l(0,n=Le(i)),l(2,o=n.topTracks({time_range:"long_term"})),l(1,t=n.topArtists({time_range:"long_term"}))}),[n,t,o,i=>{l(2,o=n.topTracks({time_range:i.detail.value}))},i=>{l(1,t=n.topArtists({time_range:i.detail.value}))}]}class Ke extends te{constructor(e){super();le(this,e,Fe,Ue,re,{})}}export{Ke as default};
