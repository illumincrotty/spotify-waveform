import{S as z,i as G,s as q,k as H,f as _,L as K,M as Q,a as B,d as m,b as d,V as h,P as ie,ad as se,ae as fe,v as M,w as S,x as T,p,n as b,A,u as X,e as E,c as P,N as Y,af as oe,ag as ce,o as F,J as ue,m as L,j,t as V,l as C,g as I,F as R,$ as D,a0 as J}from"../../chunks/vendor-1c0fa305.js";import{t as Z}from"../../chunks/storeSession-aba39d8a.js";import{c as me}from"../../chunks/api-1ccf9f0f.js";import{P as _e}from"../../chunks/page-24b96d7d.js";import{O as he}from"../../chunks/overlayLoading-82a4e248.js";import{L as O}from"../../chunks/loader-d17496a3.js";import"../../chunks/paths-28a87002.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/buttonBase-e15f0122.js";import"../../chunks/overlay-dd8139e1.js";function x(a,e,l){const t=a.slice();return t[6]=e[l],t[8]=l,t}function ee(a){let e,l,t,r,n;return{c(){e=K("rect"),this.h()},l(f){e=Q(f,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),B(e).forEach(m),this.h()},h(){d(e,"x",l=1+a[8]/a[4]*(a[2]+a[3])),d(e,"y",t=a[5]/2-Math.max(a[5]*a[6],a[2])/2),d(e,"width",a[2]),d(e,"height",r=Math.max(a[5]*a[6],a[2])),d(e,"rx",n=a[2]/2)},m(f,o){_(f,e,o)},p(f,o){o&28&&l!==(l=1+f[8]/f[4]*(f[2]+f[3]))&&d(e,"x",l),o&37&&t!==(t=f[5]/2-Math.max(f[5]*f[6],f[2])/2)&&d(e,"y",t),o&4&&d(e,"width",f[2]),o&37&&r!==(r=Math.max(f[5]*f[6],f[2]))&&d(e,"height",r),o&4&&n!==(n=f[2]/2)&&d(e,"rx",n)},d(f){f&&m(e)}}}function te(a){let e,l=a[8]%a[4]==0&&ee(a);return{c(){l&&l.c(),e=H()},l(t){l&&l.l(t),e=H()},m(t,r){l&&l.m(t,r),_(t,e,r)},p(t,r){t[8]%t[4]==0?l?l.p(t,r):(l=ee(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&m(e)}}}function pe(a){let e,l,t=a[0],r=[];for(let n=0;n<t.length;n+=1)r[n]=te(x(a,t,n));return{c(){e=K("svg");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=Q(n,"svg",{xmlns:!0,viewBox:!0,"fill-rule":!0,"clip-rule":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"aria-label":!0});var f=B(e);for(let o=0;o<r.length;o+=1)r[o].l(f);f.forEach(m),this.h()},h(){d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox",l="0 0 "+Math.ceil(a[0].length/a[4]*(a[2]+a[3])-a[3]+2)+" "+a[5]),d(e,"fill-rule","evenodd"),d(e,"clip-rule","evenodd"),d(e,"stroke-linejoin","round"),d(e,"stroke-miterlimit","2"),d(e,"aria-label",a[1])},m(n,f){_(n,e,f);for(let o=0;o<r.length;o+=1)r[o].m(e,null)},p(n,[f]){if(f&61){t=n[0];let o;for(o=0;o<t.length;o+=1){const i=x(n,t,o);r[o]?r[o].p(i,f):(r[o]=te(i),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}f&61&&l!==(l="0 0 "+Math.ceil(n[0].length/n[4]*(n[2]+n[3])-n[3]+2)+" "+n[5])&&d(e,"viewBox",l),f&2&&d(e,"aria-label",n[1])},i:h,o:h,d(n){n&&m(e),ie(r,n)}}}function ke(a,e,l){let{data:t=[]}=e,{label:r="Chart"}=e,{width:n=4,space:f=1,mod:o=1,height:i=100}=e;return a.$$set=s=>{"data"in s&&l(0,t=s.data),"label"in s&&l(1,r=s.label),"width"in s&&l(2,n=s.width),"space"in s&&l(3,f=s.space),"mod"in s&&l(4,o=s.mod),"height"in s&&l(5,i=s.height)},[t,r,n,f,o,i]}class be extends z{constructor(e){super();G(this,e,ke,pe,q,{data:0,label:1,width:2,space:3,mod:4,height:5})}}const de=a=>{const e=a.segments.map(n=>({time:n.start,duration:n.duration,loud:1-Math.min(Math.max(n.loudness_max,-35),0)/-35})),l=new se([...e.map(n=>n.time),a.track.duration],[...e.map(n=>n.loud),0]),t=[],r=a.track.duration/101;for(let n=0;n<100;n++)t.push(l.at(r*n));return console.log(t),t};function ge(a){let e,l;return e=new fe({props:{theme:a[1],data:a[0]}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,[r]){const n={};r&1&&(n.data=t[0]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ve(a,e,l){let{data:t={}}=e;const r={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"var(--dark)",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"var(--t3)",base09:"var(--t4)",base0A:"#FBA922",base0B:"var(--t1)",base0C:"var(--t3)",base0D:"var(--t3)",base0E:"var(--t4)",base0F:"#3971ED","tree-view-font-size":"3rem"};return a.$$set=n=>{"data"in n&&l(0,t=n.data)},[t,r]}class W extends z{constructor(e){super();G(this,e,ve,ge,q,{data:0})}}function we(a){let e,l;return{c(){e=E("img"),this.h()},l(t){e=P(t,"IMG",{src:!0,alt:!0}),this.h()},h(){Y(e.src,l="https://scannables.scdn.co/uri/plain/svg/262626/white/1000/spotify:"+a[0])||d(e,"src",l),d(e,"alt","Spotify Scannable link")},m(t,r){_(t,e,r)},p(t,r){r&1&&!Y(e.src,l="https://scannables.scdn.co/uri/plain/svg/262626/white/1000/spotify:"+t[0])&&d(e,"src",l)},d(t){t&&m(e)}}}function $e(a){let e,l;return{c(){e=new oe,l=H(),this.h()},l(t){e=ce(t),l=H(),this.h()},h(){e.a=l},m(t,r){e.m(a[1],t,r),_(t,l,r)},p(t,r){r&2&&e.p(t[1])},d(t){t&&m(l),t&&e.d()}}}function ye(a){let e;function l(n,f){return n[1]?$e:we}let t=l(a),r=t(a);return{c(){r.c(),e=H()},l(n){r.l(n),e=H()},m(n,f){r.m(n,f),_(n,e,f)},p(n,[f]){t===(t=l(n))&&r?r.p(n,f):(r.d(1),r=t(n),r&&(r.c(),r.m(e.parentNode,e)))},i:h,o:h,d(n){r.d(n),n&&m(e)}}}function je(a,e,l){let{uri:t}=e,{svgClass:r="svg-spotify-code"}=e,n;X(()=>{f()});const f=async()=>{const i=await(await fetch(`https://scannables.scdn.co/uri/plain/svg/262626/white/891/spotify:${t}`)).text();l(1,n=i.replace('0 0 400 100"',`50 20 380 60" class="${r}"`).replaceAll('fill="#ffffff"',"").replace('<rect x="0" y="0" width="400" height="100" fill="#262626"/>','<rect rx="3.36" ry="3.36" y="20" height="60" x="50" width="30"></rect>').replace('width="891"',"").replace('height="222"',"").replace(/<g.*g>/,'<rect rx="3.36" ry="3.36" y="20" height="60" width="30" x="400"></rect>'))};return a.$$set=o=>{"uri"in o&&l(0,t=o.uri),"svgClass"in o&&l(2,r=o.svgClass)},[t,n,r]}class Ce extends z{constructor(e){super();G(this,e,je,ye,q,{uri:0,svgClass:2})}}function Ne(a){let e,l;return e=new _e({props:{title:a[5],$$slots:{default:[Le]},$$scope:{ctx:a}}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&32&&(n.title=t[5]),r&2079&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function He(a){let e,l;return e=new he({}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:h,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function le(a){let e,l,t,r,n,f,o;return f=new be({props:{data:a[4]}}),{c(){e=E("hr"),l=j(),t=E("h2"),r=V("Track Waveform"),n=j(),M(f.$$.fragment)},l(i){e=P(i,"HR",{}),l=C(i),t=P(i,"H2",{});var s=B(t);r=I(s,"Track Waveform"),s.forEach(m),n=C(i),S(f.$$.fragment,i)},m(i,s){_(i,e,s),_(i,l,s),_(i,t,s),R(t,r),_(i,n,s),T(f,i,s),o=!0},p(i,s){const u={};s&16&&(u.data=i[4]),f.$set(u)},i(i){o||(p(f.$$.fragment,i),o=!0)},o(i){b(f.$$.fragment,i),o=!1},d(i){i&&m(e),i&&m(l),i&&m(t),i&&m(n),A(f,i)}}}function re(a){let e,l,t,r,n,f,o,i={ctx:a,current:null,token:null,hasCatch:!1,pending:Te,then:Se,catch:Me,value:10,blocks:[,,,]};return D(r=a[1],i),{c(){e=E("h2"),l=V("Track Details"),t=j(),i.block.c(),n=j(),f=E("hr")},l(s){e=P(s,"H2",{});var u=B(e);l=I(u,"Track Details"),u.forEach(m),t=C(s),i.block.l(s),n=C(s),f=P(s,"HR",{})},m(s,u){_(s,e,u),R(e,l),_(s,t,u),i.block.m(s,i.anchor=u),i.mount=()=>n.parentNode,i.anchor=n,_(s,n,u),_(s,f,u),o=!0},p(s,u){a=s,i.ctx=a,u&2&&r!==(r=a[1])&&D(r,i)||J(i,a,u)},i(s){o||(p(i.block),o=!0)},o(s){for(let u=0;u<3;u+=1){const N=i.blocks[u];b(N)}o=!1},d(s){s&&m(e),s&&m(t),i.block.d(s),i.token=null,i=null,s&&m(n),s&&m(f)}}}function Me(a){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Se(a){let e,l;return e=new W({props:{data:a[10]}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&2&&(n.data=t[10]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Te(a){let e,l;return e=new O({}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:h,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ne(a){let e,l,t,r,n,f,o,i={ctx:a,current:null,token:null,hasCatch:!1,pending:Pe,then:Ee,catch:Ae,value:10,blocks:[,,,]};return D(r=a[3],i),{c(){e=E("h2"),l=V("Track Features"),t=j(),i.block.c(),n=j(),f=E("hr")},l(s){e=P(s,"H2",{});var u=B(e);l=I(u,"Track Features"),u.forEach(m),t=C(s),i.block.l(s),n=C(s),f=P(s,"HR",{})},m(s,u){_(s,e,u),R(e,l),_(s,t,u),i.block.m(s,i.anchor=u),i.mount=()=>n.parentNode,i.anchor=n,_(s,n,u),_(s,f,u),o=!0},p(s,u){a=s,i.ctx=a,u&8&&r!==(r=a[3])&&D(r,i)||J(i,a,u)},i(s){o||(p(i.block),o=!0)},o(s){for(let u=0;u<3;u+=1){const N=i.blocks[u];b(N)}o=!1},d(s){s&&m(e),s&&m(t),i.block.d(s),i.token=null,i=null,s&&m(n),s&&m(f)}}}function Ae(a){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ee(a){let e,l;return e=new W({props:{data:a[10]}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&8&&(n.data=t[10]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Pe(a){let e,l;return e=new O({}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:h,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ae(a){let e,l,t,r,n,f,o={ctx:a,current:null,token:null,hasCatch:!1,pending:Fe,then:De,catch:Be,value:9,blocks:[,,,]};return D(n=a[2],o),{c(){e=E("h2"),l=V("Track Analysis"),t=j(),r=H(),o.block.c()},l(i){e=P(i,"H2",{});var s=B(e);l=I(s,"Track Analysis"),s.forEach(m),t=C(i),r=H(),o.block.l(i)},m(i,s){_(i,e,s),R(e,l),_(i,t,s),_(i,r,s),o.block.m(i,o.anchor=s),o.mount=()=>r.parentNode,o.anchor=r,f=!0},p(i,s){a=i,o.ctx=a,s&4&&n!==(n=a[2])&&D(n,o)||J(o,a,s)},i(i){f||(p(o.block),f=!0)},o(i){for(let s=0;s<3;s+=1){const u=o.blocks[s];b(u)}f=!1},d(i){i&&m(e),i&&m(t),i&&m(r),o.block.d(i),o.token=null,o=null}}}function Be(a){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function De(a){let e,l;return e=new W({props:{data:a[9]}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&4&&(n.data=t[9]),e.$set(n)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Fe(a){let e,l;return e=new O({}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:h,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Le(a){let e,l,t,r,n,f,o,i,s,u,N,y;r=new Ce({props:{uri:"track:"+a[0]}});let g=a[4]&&le(a),v=a[1]&&re(a),w=a[3]&&ne(a),$=a[2]&&ae(a);return{c(){e=E("h2"),l=V("Spotify Code"),t=j(),M(r.$$.fragment),n=j(),g&&g.c(),f=j(),o=E("hr"),i=j(),v&&v.c(),s=j(),w&&w.c(),u=j(),$&&$.c(),N=H()},l(c){e=P(c,"H2",{});var k=B(e);l=I(k,"Spotify Code"),k.forEach(m),t=C(c),S(r.$$.fragment,c),n=C(c),g&&g.l(c),f=C(c),o=P(c,"HR",{}),i=C(c),v&&v.l(c),s=C(c),w&&w.l(c),u=C(c),$&&$.l(c),N=H()},m(c,k){_(c,e,k),R(e,l),_(c,t,k),T(r,c,k),_(c,n,k),g&&g.m(c,k),_(c,f,k),_(c,o,k),_(c,i,k),v&&v.m(c,k),_(c,s,k),w&&w.m(c,k),_(c,u,k),$&&$.m(c,k),_(c,N,k),y=!0},p(c,k){const U={};k&1&&(U.uri="track:"+c[0]),r.$set(U),c[4]?g?(g.p(c,k),k&16&&p(g,1)):(g=le(c),g.c(),p(g,1),g.m(f.parentNode,f)):g&&(L(),b(g,1,1,()=>{g=null}),F()),c[1]?v?(v.p(c,k),k&2&&p(v,1)):(v=re(c),v.c(),p(v,1),v.m(s.parentNode,s)):v&&(L(),b(v,1,1,()=>{v=null}),F()),c[3]?w?(w.p(c,k),k&8&&p(w,1)):(w=ne(c),w.c(),p(w,1),w.m(u.parentNode,u)):w&&(L(),b(w,1,1,()=>{w=null}),F()),c[2]?$?($.p(c,k),k&4&&p($,1)):($=ae(c),$.c(),p($,1),$.m(N.parentNode,N)):$&&(L(),b($,1,1,()=>{$=null}),F())},i(c){y||(p(r.$$.fragment,c),p(g),p(v),p(w),p($),y=!0)},o(c){b(r.$$.fragment,c),b(g),b(v),b(w),b($),y=!1},d(c){c&&m(e),c&&m(t),A(r,c),c&&m(n),g&&g.d(c),c&&m(f),c&&m(o),c&&m(i),v&&v.d(c),c&&m(s),w&&w.d(c),c&&m(u),$&&$.d(c),c&&m(N)}}}function Ve(a){let e,l,t,r;const n=[He,Ne],f=[];function o(i,s){return i[0]===""||i[5]==="PlaceHolder"?0:1}return e=o(a),l=f[e]=n[e](a),{c(){l.c(),t=H()},l(i){l.l(i),t=H()},m(i,s){f[e].m(i,s),_(i,t,s),r=!0},p(i,[s]){let u=e;e=o(i),e===u?f[e].p(i,s):(L(),b(f[u],1,1,()=>{f[u]=null}),F(),l=f[e],l?l.p(i,s):(l=f[e]=n[e](i),l.c()),p(l,1),l.m(t.parentNode,t))},i(i){r||(p(l),r=!0)},o(i){b(l),r=!1},d(i){f[e].d(i),i&&m(t)}}}function Ie(a,e,l){let t;ue(a,Z,y=>l(7,t=y));let{trackID:r=""}=e,n,f,o,i,s,u="PlaceHolder";X(()=>{if(r===""){const y=new URLSearchParams(window.location.search);y.has("id")?(console.debug(y.get("id")),l(0,r=y.get("id"))):history.back()}console.debug(`id: ${r}`),t!=="empty"&&Z.valid()&&(n=me(t),n.track(r).then(y=>{l(5,u=`${y.name} by ${y.artists[0].name}`)}),N())});const N=async()=>{l(1,f=n.track(r)),l(3,i=n.audioFeatures(r)),l(2,o=n.audioAnalysis(r)),l(4,s=de(await n.audioAnalysis(r)))};return a.$$set=y=>{"trackID"in y&&l(0,r=y.trackID)},[r,f,o,i,s,u]}class Xe extends z{constructor(e){super();G(this,e,Ie,Ve,q,{trackID:0})}}export{Xe as default};
