import{S as V,i as z,s as G,k as y,f as k,L as R,M as U,a as A,d as m,b as g,T as _,W as ne,af as ae,ag as ie,v as j,w as C,x as T,p as h,n as b,A as N,u as X,e as E,c as B,X as K,ah as se,ai as oe,F as fe,m as F,o as H,t as L,j as M,g as P,l as S,E as I,a3 as D,a4 as W}from"../../chunks/vendor-bb5dd8bc.js";import{g as ce,t as Q}from"../../chunks/storeSession-04fb7cc2.js";import{c as ue}from"../../chunks/api-1ccf9f0f.js";import{P as me}from"../../chunks/page-ff684a85.js";import{O as _e}from"../../chunks/overlayLoading-12e1bb89.js";import{L as q}from"../../chunks/loader-0a99fc14.js";import{b as he}from"../../chunks/paths-28a87002.js";import"../../chunks/singletons-a42a5e91.js";import"../../chunks/buttonBase-01b71081.js";import"../../chunks/overlay-d07c3e9e.js";function Y(a,e,l){const t=a.slice();return t[6]=e[l],t[8]=l,t}function Z(a){let e,l,t,r,n;return{c(){e=R("rect"),this.h()},l(s){e=U(s,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),A(e).forEach(m),this.h()},h(){g(e,"x",l=1+a[8]/a[4]*(a[2]+a[3])),g(e,"y",t=a[5]/2-Math.max(a[5]*a[6],a[2])/2),g(e,"width",a[2]),g(e,"height",r=Math.max(a[5]*a[6],a[2])),g(e,"rx",n=a[2]/2)},m(s,i){k(s,e,i)},p(s,i){i&28&&l!==(l=1+s[8]/s[4]*(s[2]+s[3]))&&g(e,"x",l),i&37&&t!==(t=s[5]/2-Math.max(s[5]*s[6],s[2])/2)&&g(e,"y",t),i&4&&g(e,"width",s[2]),i&37&&r!==(r=Math.max(s[5]*s[6],s[2]))&&g(e,"height",r),i&4&&n!==(n=s[2]/2)&&g(e,"rx",n)},d(s){s&&m(e)}}}function x(a){let e,l=a[8]%a[4]==0&&Z(a);return{c(){l&&l.c(),e=y()},l(t){l&&l.l(t),e=y()},m(t,r){l&&l.m(t,r),k(t,e,r)},p(t,r){t[8]%t[4]==0?l?l.p(t,r):(l=Z(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&m(e)}}}function pe(a){let e,l,t=a[0],r=[];for(let n=0;n<t.length;n+=1)r[n]=x(Y(a,t,n));return{c(){e=R("svg");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=U(n,"svg",{xmlns:!0,viewBox:!0,"fill-rule":!0,"clip-rule":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"aria-label":!0});var s=A(e);for(let i=0;i<r.length;i+=1)r[i].l(s);s.forEach(m),this.h()},h(){g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"viewBox",l="0 0 "+Math.ceil(a[0].length/a[4]*(a[2]+a[3])-a[3]+2)+" "+a[5]),g(e,"fill-rule","evenodd"),g(e,"clip-rule","evenodd"),g(e,"stroke-linejoin","round"),g(e,"stroke-miterlimit","2"),g(e,"aria-label",a[1])},m(n,s){k(n,e,s);for(let i=0;i<r.length;i+=1)r[i].m(e,null)},p(n,[s]){if(s&61){t=n[0];let i;for(i=0;i<t.length;i+=1){const o=Y(n,t,i);r[i]?r[i].p(o,s):(r[i]=x(o),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=t.length}s&61&&l!==(l="0 0 "+Math.ceil(n[0].length/n[4]*(n[2]+n[3])-n[3]+2)+" "+n[5])&&g(e,"viewBox",l),s&2&&g(e,"aria-label",n[1])},i:_,o:_,d(n){n&&m(e),ne(r,n)}}}function ke(a,e,l){let{data:t=[]}=e,{label:r="Chart"}=e,{width:n=4,space:s=1,mod:i=1,height:o=100}=e;return a.$$set=f=>{"data"in f&&l(0,t=f.data),"label"in f&&l(1,r=f.label),"width"in f&&l(2,n=f.width),"space"in f&&l(3,s=f.space),"mod"in f&&l(4,i=f.mod),"height"in f&&l(5,o=f.height)},[t,r,n,s,i,o]}class be extends V{constructor(e){super();z(this,e,ke,pe,G,{data:0,label:1,width:2,space:3,mod:4,height:5})}}const de=a=>{const e=a.segments.map(n=>({time:n.start,duration:n.duration,loud:1-Math.min(Math.max(n.loudness_max,-35),0)/-35})),l=new ae([...e.map(n=>n.time),a.track.duration],[...e.map(n=>n.loud),0]),t=[],r=a.track.duration/101;for(let n=0;n<100;n++)t.push(l.at(r*n));return console.log(t),t};function ge(a){let e,l;return e=new ie({props:{theme:a[1],data:a[0]}}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,[r]){const n={};r&1&&(n.data=t[0]),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function ve(a,e,l){let{data:t={}}=e;const r={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"var(--dark)",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"var(--t3)",base09:"var(--t4)",base0A:"#FBA922",base0B:"var(--t1)",base0C:"var(--t3)",base0D:"var(--t3)",base0E:"var(--t4)",base0F:"#3971ED","tree-view-font-size":"3rem"};return a.$$set=n=>{"data"in n&&l(0,t=n.data)},[t,r]}class O extends V{constructor(e){super();z(this,e,ve,ge,G,{data:0})}}function we(a){let e,l;return{c(){e=E("img"),this.h()},l(t){e=B(t,"IMG",{src:!0,alt:!0}),this.h()},h(){K(e.src,l="https://scannables.scdn.co/uri/plain/svg/262626/white/1000/spotify:"+a[0])||g(e,"src",l),g(e,"alt","Spotify Scannable link")},m(t,r){k(t,e,r)},p(t,r){r&1&&!K(e.src,l="https://scannables.scdn.co/uri/plain/svg/262626/white/1000/spotify:"+t[0])&&g(e,"src",l)},d(t){t&&m(e)}}}function $e(a){let e,l;return{c(){e=new se,l=y(),this.h()},l(t){e=oe(t),l=y(),this.h()},h(){e.a=l},m(t,r){e.m(a[1],t,r),k(t,l,r)},p(t,r){r&2&&e.p(t[1])},d(t){t&&m(l),t&&e.d()}}}function ye(a){let e;function l(n,s){return n[1]?$e:we}let t=l(a),r=t(a);return{c(){r.c(),e=y()},l(n){r.l(n),e=y()},m(n,s){r.m(n,s),k(n,e,s)},p(n,[s]){t===(t=l(n))&&r?r.p(n,s):(r.d(1),r=t(n),r&&(r.c(),r.m(e.parentNode,e)))},i:_,o:_,d(n){r.d(n),n&&m(e)}}}function je(a,e,l){let{uri:t}=e,{svgClass:r="svg-spotify-code"}=e,n;X(()=>{s()});const s=async()=>{const o=await(await fetch(`https://scannables.scdn.co/uri/plain/svg/262626/white/891/spotify:${t}`)).text();l(1,n=o.replace('0 0 400 100"',`50 20 380 60" class="${r}"`).replaceAll('fill="#ffffff"',"").replace('<rect x="0" y="0" width="400" height="100" fill="#262626"/>','<rect rx="3.36" ry="3.36" y="20" height="60" x="50" width="30"></rect>').replace('width="891"',"").replace('height="222"',"").replace(/<g.*g>/,'<rect rx="3.36" ry="3.36" y="20" height="60" width="30" x="400"></rect>'))};return a.$$set=i=>{"uri"in i&&l(0,t=i.uri),"svgClass"in i&&l(2,r=i.svgClass)},[t,n,r]}class Ce extends V{constructor(e){super();z(this,e,je,ye,G,{uri:0,svgClass:2})}}function Te(a){let e,l,t,r,n,s,i,o,f,$;r=new Ce({props:{uri:"track:"+a[0]}});let d=a[4]&&ee(a),u=a[1]&&te(a),v=a[3]&&le(a),w=a[2]&&re(a);return{c(){e=E("h2"),l=L("Spotify Code"),t=M(),j(r.$$.fragment),n=M(),d&&d.c(),s=M(),u&&u.c(),i=M(),v&&v.c(),o=M(),w&&w.c(),f=y()},l(c){e=B(c,"H2",{});var p=A(e);l=P(p,"Spotify Code"),p.forEach(m),t=S(c),C(r.$$.fragment,c),n=S(c),d&&d.l(c),s=S(c),u&&u.l(c),i=S(c),v&&v.l(c),o=S(c),w&&w.l(c),f=y()},m(c,p){k(c,e,p),I(e,l),k(c,t,p),T(r,c,p),k(c,n,p),d&&d.m(c,p),k(c,s,p),u&&u.m(c,p),k(c,i,p),v&&v.m(c,p),k(c,o,p),w&&w.m(c,p),k(c,f,p),$=!0},p(c,p){const J={};p&1&&(J.uri="track:"+c[0]),r.$set(J),c[4]?d?(d.p(c,p),p&16&&h(d,1)):(d=ee(c),d.c(),h(d,1),d.m(s.parentNode,s)):d&&(F(),b(d,1,1,()=>{d=null}),H()),c[1]?u?(u.p(c,p),p&2&&h(u,1)):(u=te(c),u.c(),h(u,1),u.m(i.parentNode,i)):u&&(F(),b(u,1,1,()=>{u=null}),H()),c[3]?v?(v.p(c,p),p&8&&h(v,1)):(v=le(c),v.c(),h(v,1),v.m(o.parentNode,o)):v&&(F(),b(v,1,1,()=>{v=null}),H()),c[2]?w?(w.p(c,p),p&4&&h(w,1)):(w=re(c),w.c(),h(w,1),w.m(f.parentNode,f)):w&&(F(),b(w,1,1,()=>{w=null}),H())},i(c){$||(h(r.$$.fragment,c),h(d),h(u),h(v),h(w),$=!0)},o(c){b(r.$$.fragment,c),b(d),b(u),b(v),b(w),$=!1},d(c){c&&m(e),c&&m(t),N(r,c),c&&m(n),d&&d.d(c),c&&m(s),u&&u.d(c),c&&m(i),v&&v.d(c),c&&m(o),w&&w.d(c),c&&m(f)}}}function Ne(a){let e,l;return e=new _e({}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:_,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function ee(a){let e,l,t,r,n;return r=new be({props:{data:a[4]}}),{c(){e=E("h2"),l=L("Track Waveform"),t=M(),j(r.$$.fragment)},l(s){e=B(s,"H2",{});var i=A(e);l=P(i,"Track Waveform"),i.forEach(m),t=S(s),C(r.$$.fragment,s)},m(s,i){k(s,e,i),I(e,l),k(s,t,i),T(r,s,i),n=!0},p(s,i){const o={};i&16&&(o.data=s[4]),r.$set(o)},i(s){n||(h(r.$$.fragment,s),n=!0)},o(s){b(r.$$.fragment,s),n=!1},d(s){s&&m(e),s&&m(t),N(r,s)}}}function te(a){let e,l,t,r,n,s,i={ctx:a,current:null,token:null,hasCatch:!1,pending:Ae,then:Se,catch:Me,value:10,blocks:[,,,]};return D(n=a[1],i),{c(){e=E("h2"),l=L("Track Details"),t=M(),r=y(),i.block.c()},l(o){e=B(o,"H2",{});var f=A(e);l=P(f,"Track Details"),f.forEach(m),t=S(o),r=y(),i.block.l(o)},m(o,f){k(o,e,f),I(e,l),k(o,t,f),k(o,r,f),i.block.m(o,i.anchor=f),i.mount=()=>r.parentNode,i.anchor=r,s=!0},p(o,f){a=o,i.ctx=a,f&2&&n!==(n=a[1])&&D(n,i)||W(i,a,f)},i(o){s||(h(i.block),s=!0)},o(o){for(let f=0;f<3;f+=1){const $=i.blocks[f];b($)}s=!1},d(o){o&&m(e),o&&m(t),o&&m(r),i.block.d(o),i.token=null,i=null}}}function Me(a){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Se(a){let e,l;return e=new O({props:{data:a[10]}}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&2&&(n.data=t[10]),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function Ae(a){let e,l;return e=new q({}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:_,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function le(a){let e,l,t,r,n,s,i={ctx:a,current:null,token:null,hasCatch:!1,pending:De,then:Be,catch:Ee,value:10,blocks:[,,,]};return D(n=a[3],i),{c(){e=E("h2"),l=L("Track Features"),t=M(),r=y(),i.block.c()},l(o){e=B(o,"H2",{});var f=A(e);l=P(f,"Track Features"),f.forEach(m),t=S(o),r=y(),i.block.l(o)},m(o,f){k(o,e,f),I(e,l),k(o,t,f),k(o,r,f),i.block.m(o,i.anchor=f),i.mount=()=>r.parentNode,i.anchor=r,s=!0},p(o,f){a=o,i.ctx=a,f&8&&n!==(n=a[3])&&D(n,i)||W(i,a,f)},i(o){s||(h(i.block),s=!0)},o(o){for(let f=0;f<3;f+=1){const $=i.blocks[f];b($)}s=!1},d(o){o&&m(e),o&&m(t),o&&m(r),i.block.d(o),i.token=null,i=null}}}function Ee(a){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Be(a){let e,l;return e=new O({props:{data:a[10]}}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&8&&(n.data=t[10]),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function De(a){let e,l;return e=new q({}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:_,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function re(a){let e,l,t,r,n,s,i={ctx:a,current:null,token:null,hasCatch:!1,pending:Le,then:He,catch:Fe,value:9,blocks:[,,,]};return D(n=a[2],i),{c(){e=E("h2"),l=L("Track Analysis"),t=M(),r=y(),i.block.c()},l(o){e=B(o,"H2",{});var f=A(e);l=P(f,"Track Analysis"),f.forEach(m),t=S(o),r=y(),i.block.l(o)},m(o,f){k(o,e,f),I(e,l),k(o,t,f),k(o,r,f),i.block.m(o,i.anchor=f),i.mount=()=>r.parentNode,i.anchor=r,s=!0},p(o,f){a=o,i.ctx=a,f&4&&n!==(n=a[2])&&D(n,i)||W(i,a,f)},i(o){s||(h(i.block),s=!0)},o(o){for(let f=0;f<3;f+=1){const $=i.blocks[f];b($)}s=!1},d(o){o&&m(e),o&&m(t),o&&m(r),i.block.d(o),i.token=null,i=null}}}function Fe(a){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function He(a){let e,l;return e=new O({props:{data:a[9]}}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const n={};r&4&&(n.data=t[9]),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function Le(a){let e,l;return e=new q({}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:_,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function Pe(a){let e,l,t,r;const n=[Ne,Te],s=[];function i(o,f){return o[0]===""||o[5]===""?0:1}return e=i(a),l=s[e]=n[e](a),{c(){l.c(),t=y()},l(o){l.l(o),t=y()},m(o,f){s[e].m(o,f),k(o,t,f),r=!0},p(o,f){let $=e;e=i(o),e===$?s[e].p(o,f):(F(),b(s[$],1,1,()=>{s[$]=null}),H(),l=s[e],l?l.p(o,f):(l=s[e]=n[e](o),l.c()),h(l,1),l.m(t.parentNode,t))},i(o){r||(h(l),r=!0)},o(o){b(l),r=!1},d(o){s[e].d(o),o&&m(t)}}}function Ie(a){let e,l;return e=new me({props:{title:a[5]||"Track Analysis",$$slots:{default:[Pe]},$$scope:{ctx:a}}}),{c(){j(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,[r]){const n={};r&32&&(n.title=t[5]||"Track Analysis"),r&2111&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){N(e,t)}}}function Ve(a,e,l){let t;fe(a,Q,u=>l(7,t=u));let{trackID:r=""}=e,n,s,i,o,f,$="";X(()=>{if(r===""){const u=new URLSearchParams(window.location.search);u.has("id")?(console.debug(u.get("id")),l(0,r=u.get("id"))):ce(`${he}/data/search?categories=track`)}console.debug(`id: ${r}`),t!=="empty"&&Q.valid()&&(n=ue(t),n.track(r).then(u=>{l(5,$=`${u.name} by ${u.artists[0].name}`)}),d())});const d=async()=>{l(1,s=n.track(r)),l(3,o=n.audioFeatures(r)),l(2,i=n.audioAnalysis(r)),l(4,f=de(await n.audioAnalysis(r)))};return a.$$set=u=>{"trackID"in u&&l(0,r=u.trackID)},[r,s,i,o,f,$]}class Qe extends V{constructor(e){super();z(this,e,Ve,Ie,G,{trackID:0})}}export{Qe as default};
