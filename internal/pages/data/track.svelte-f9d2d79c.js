import{S as W,i as q,s as z,k as j,f as p,N as K,O as Q,a as E,d as u,b as w,V as m,a0 as oe,an as se,ao as fe,v as C,w as N,x as A,p as _,n as b,A as T,u as X,e as D,c as F,W as Y,ap as ce,aq as ue,G as me,m as P,o as L,t as V,j as S,g as G,l as M,F as I,a5 as H,a6 as O}from"../../chunks/vendor-d001275b.js";import{t as Z,g as _e}from"../../chunks/storeSession-3798d66e.js";import{c as he}from"../../chunks/api-1d4d6776.js";import{P as ke}from"../../chunks/page-cb999a0b.js";import{O as pe}from"../../chunks/overlayLoading-22984ad6.js";import{L as J}from"../../chunks/loader-3d4f523d.js";import{b as be}from"../../chunks/paths-28a87002.js";import"../../chunks/stateGen-632403f6.js";import"../../chunks/singletons-a42a5e91.js";import"../../chunks/buttonBase-cbe3e4d0.js";import"../../chunks/overlay-cda75558.js";function x(i,e,l){const t=i.slice();return t[6]=e[l],t[8]=l,t}function ee(i){let e,l,t,r,n;return{c(){e=K("rect"),this.h()},l(s){e=Q(s,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),E(e).forEach(u),this.h()},h(){w(e,"x",l=1+i[8]/i[4]*(i[2]+i[3])),w(e,"y",t=i[5]/2-Math.max(i[5]*i[6],i[2])/2),w(e,"width",i[2]),w(e,"height",r=Math.max(i[5]*i[6],i[2])),w(e,"rx",n=i[2]/2)},m(s,a){p(s,e,a)},p(s,a){a&28&&l!==(l=1+s[8]/s[4]*(s[2]+s[3]))&&w(e,"x",l),a&37&&t!==(t=s[5]/2-Math.max(s[5]*s[6],s[2])/2)&&w(e,"y",t),a&4&&w(e,"width",s[2]),a&37&&r!==(r=Math.max(s[5]*s[6],s[2]))&&w(e,"height",r),a&4&&n!==(n=s[2]/2)&&w(e,"rx",n)},d(s){s&&u(e)}}}function te(i){let e,l=i[8]%i[4]==0&&ee(i);return{c(){l&&l.c(),e=j()},l(t){l&&l.l(t),e=j()},m(t,r){l&&l.m(t,r),p(t,e,r)},p(t,r){t[8]%t[4]==0?l?l.p(t,r):(l=ee(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&u(e)}}}function de(i){let e,l,t=i[0],r=[];for(let n=0;n<t.length;n+=1)r[n]=te(x(i,t,n));return{c(){e=K("svg");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=Q(n,"svg",{xmlns:!0,viewBox:!0,"fill-rule":!0,"clip-rule":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"aria-label":!0});var s=E(e);for(let a=0;a<r.length;a+=1)r[a].l(s);s.forEach(u),this.h()},h(){w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"viewBox",l="0 0 "+Math.ceil(i[0].length/i[4]*(i[2]+i[3])-i[3]+2)+" "+i[5]),w(e,"fill-rule","evenodd"),w(e,"clip-rule","evenodd"),w(e,"stroke-linejoin","round"),w(e,"stroke-miterlimit","2"),w(e,"aria-label",i[1])},m(n,s){p(n,e,s);for(let a=0;a<r.length;a+=1)r[a].m(e,null)},p(n,[s]){if(s&61){t=n[0];let a;for(a=0;a<t.length;a+=1){const o=x(n,t,a);r[a]?r[a].p(o,s):(r[a]=te(o),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}s&61&&l!==(l="0 0 "+Math.ceil(n[0].length/n[4]*(n[2]+n[3])-n[3]+2)+" "+n[5])&&w(e,"viewBox",l),s&2&&w(e,"aria-label",n[1])},i:m,o:m,d(n){n&&u(e),oe(r,n)}}}function ge(i,e,l){let{data:t=[]}=e,{label:r="Chart"}=e,{width:n=4,space:s=1,mod:a=1,height:o=100}=e;return i.$$set=f=>{"data"in f&&l(0,t=f.data),"label"in f&&l(1,r=f.label),"width"in f&&l(2,n=f.width),"space"in f&&l(3,s=f.space),"mod"in f&&l(4,a=f.mod),"height"in f&&l(5,o=f.height)},[t,r,n,s,a,o]}class we extends W{constructor(e){super();q(this,e,ge,de,z,{data:0,label:1,width:2,space:3,mod:4,height:5})}}const $e=i=>{const e=i.segments.map(n=>({time:n.start,duration:n.duration,loud:1-Math.min(Math.max(n.loudness_max,-35),0)/-35})),l=new se([...e.map(n=>n.time),i.track.duration],[...e.map(n=>n.loud),0]),t=[],r=i.track.duration/101;for(let n=0;n<100;n++)t.push(l.at(r*n));return console.log(t),t};function ve(i){let e,l;return e=new fe({props:{theme:i[1],data:i[0]}}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,[r]){const n={};r&1&&(n.data=t[0]),e.$set(n)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ye(i,e,l){let{data:t={}}=e;const r={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"var(--dark)",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"var(--t3)",base09:"var(--t4)",base0A:"#FBA922",base0B:"var(--t1)",base0C:"var(--t3)",base0D:"var(--t3)",base0E:"var(--t4)",base0F:"#3971ED","tree-view-font-size":"3rem"};return i.$$set=n=>{"data"in n&&l(0,t=n.data)},[t,r]}class R extends W{constructor(e){super();q(this,e,ye,ve,z,{data:0})}}function je(i){let e,l;return{c(){e=D("img"),this.h()},l(t){e=F(t,"IMG",{src:!0,alt:!0}),this.h()},h(){Y(e.src,l="https://scannables.scdn.co/uri/plain/svg/262626/white/1000/spotify:"+i[0])||w(e,"src",l),w(e,"alt","Spotify Scannable link")},m(t,r){p(t,e,r)},p(t,r){r&1&&!Y(e.src,l="https://scannables.scdn.co/uri/plain/svg/262626/white/1000/spotify:"+t[0])&&w(e,"src",l)},d(t){t&&u(e)}}}function Ce(i){let e,l;return{c(){e=new ce,l=j(),this.h()},l(t){e=ue(t),l=j(),this.h()},h(){e.a=l},m(t,r){e.m(i[1],t,r),p(t,l,r)},p(t,r){r&2&&e.p(t[1])},d(t){t&&u(l),t&&e.d()}}}function Ne(i){let e;function l(n,s){return n[1]?Ce:je}let t=l(i),r=t(i);return{c(){r.c(),e=j()},l(n){r.l(n),e=j()},m(n,s){r.m(n,s),p(n,e,s)},p(n,[s]){t===(t=l(n))&&r?r.p(n,s):(r.d(1),r=t(n),r&&(r.c(),r.m(e.parentNode,e)))},i:m,o:m,d(n){r.d(n),n&&u(e)}}}function Ae(i,e,l){let{uri:t}=e,{svgClass:r="svg-spotify-code"}=e,n;X(()=>{s()});const s=async()=>{const o=await(await fetch(`https://scannables.scdn.co/uri/plain/svg/262626/white/891/spotify:${t}`)).text();l(1,n=o.replace('0 0 400 100"',`50 20 380 60" class="${r}"`).replaceAll('fill="#ffffff"',"").replace('<rect x="0" y="0" width="400" height="100" fill="#262626"/>','<rect rx="3.36" ry="3.36" y="20" height="60" x="50" width="30"></rect>').replace('width="891"',"").replace('height="222"',"").replace(/<g.*g>/,'<rect rx="3.36" ry="3.36" y="20" height="60" width="30" x="400"></rect>'))};return i.$$set=a=>{"uri"in a&&l(0,t=a.uri),"svgClass"in a&&l(2,r=a.svgClass)},[t,n,r]}class Te extends W{constructor(e){super();q(this,e,Ae,Ne,z,{uri:0,svgClass:2})}}function Se(i){let e,l,t,r,n,s,a,o,f,$,B;r=new Te({props:{uri:"track:"+i[0]}});let g=i[6]&&le(i),h=i[2]&&re(i),d=i[4]&&ne(i),v=i[3]&&ae(i),y=i[5]&&ie(i);return{c(){e=D("h2"),l=V("Spotify Code"),t=S(),C(r.$$.fragment),n=S(),g&&g.c(),s=S(),h&&h.c(),a=S(),d&&d.c(),o=S(),v&&v.c(),f=S(),y&&y.c(),$=j()},l(c){e=F(c,"H2",{});var k=E(e);l=G(k,"Spotify Code"),k.forEach(u),t=M(c),N(r.$$.fragment,c),n=M(c),g&&g.l(c),s=M(c),h&&h.l(c),a=M(c),d&&d.l(c),o=M(c),v&&v.l(c),f=M(c),y&&y.l(c),$=j()},m(c,k){p(c,e,k),I(e,l),p(c,t,k),A(r,c,k),p(c,n,k),g&&g.m(c,k),p(c,s,k),h&&h.m(c,k),p(c,a,k),d&&d.m(c,k),p(c,o,k),v&&v.m(c,k),p(c,f,k),y&&y.m(c,k),p(c,$,k),B=!0},p(c,k){const U={};k&1&&(U.uri="track:"+c[0]),r.$set(U),c[6]?g?(g.p(c,k),k&64&&_(g,1)):(g=le(c),g.c(),_(g,1),g.m(s.parentNode,s)):g&&(P(),b(g,1,1,()=>{g=null}),L()),c[2]?h?(h.p(c,k),k&4&&_(h,1)):(h=re(c),h.c(),_(h,1),h.m(a.parentNode,a)):h&&(P(),b(h,1,1,()=>{h=null}),L()),c[4]?d?(d.p(c,k),k&16&&_(d,1)):(d=ne(c),d.c(),_(d,1),d.m(o.parentNode,o)):d&&(P(),b(d,1,1,()=>{d=null}),L()),c[3]?v?(v.p(c,k),k&8&&_(v,1)):(v=ae(c),v.c(),_(v,1),v.m(f.parentNode,f)):v&&(P(),b(v,1,1,()=>{v=null}),L()),c[5]?y?(y.p(c,k),k&32&&_(y,1)):(y=ie(c),y.c(),_(y,1),y.m($.parentNode,$)):y&&(P(),b(y,1,1,()=>{y=null}),L())},i(c){B||(_(r.$$.fragment,c),_(g),_(h),_(d),_(v),_(y),B=!0)},o(c){b(r.$$.fragment,c),b(g),b(h),b(d),b(v),b(y),B=!1},d(c){c&&u(e),c&&u(t),T(r,c),c&&u(n),g&&g.d(c),c&&u(s),h&&h.d(c),c&&u(a),d&&d.d(c),c&&u(o),v&&v.d(c),c&&u(f),y&&y.d(c),c&&u($)}}}function Me(i){let e,l;return e=new pe({}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:m,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function le(i){let e,l,t,r,n;return r=new we({props:{data:i[6]}}),{c(){e=D("h2"),l=V("Track Waveform"),t=S(),C(r.$$.fragment)},l(s){e=F(s,"H2",{});var a=E(e);l=G(a,"Track Waveform"),a.forEach(u),t=M(s),N(r.$$.fragment,s)},m(s,a){p(s,e,a),I(e,l),p(s,t,a),A(r,s,a),n=!0},p(s,a){const o={};a&64&&(o.data=s[6]),r.$set(o)},i(s){n||(_(r.$$.fragment,s),n=!0)},o(s){b(r.$$.fragment,s),n=!1},d(s){s&&u(e),s&&u(t),T(r,s)}}}function re(i){let e,l,t,r,n,s,a={ctx:i,current:null,token:null,hasCatch:!1,pending:Be,then:He,catch:Ee,value:12,blocks:[,,,]};return H(n=i[2],a),{c(){e=D("h2"),l=V("Track Details"),t=S(),r=j(),a.block.c()},l(o){e=F(o,"H2",{});var f=E(e);l=G(f,"Track Details"),f.forEach(u),t=M(o),r=j(),a.block.l(o)},m(o,f){p(o,e,f),I(e,l),p(o,t,f),p(o,r,f),a.block.m(o,a.anchor=f),a.mount=()=>r.parentNode,a.anchor=r,s=!0},p(o,f){i=o,a.ctx=i,f&4&&n!==(n=i[2])&&H(n,a)||O(a,i,f)},i(o){s||(_(a.block),s=!0)},o(o){for(let f=0;f<3;f+=1){const $=a.blocks[f];b($)}s=!1},d(o){o&&u(e),o&&u(t),o&&u(r),a.block.d(o),a.token=null,a=null}}}function Ee(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function He(i){let e,l;return e=new R({props:{data:i[12]}}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,r){const n={};r&4&&(n.data=t[12]),e.$set(n)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Be(i){let e,l;return e=new J({}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:m,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ne(i){let e,l,t,r,n,s,a={ctx:i,current:null,token:null,hasCatch:!1,pending:Pe,then:Fe,catch:De,value:12,blocks:[,,,]};return H(n=i[4],a),{c(){e=D("h2"),l=V("Track Features"),t=S(),r=j(),a.block.c()},l(o){e=F(o,"H2",{});var f=E(e);l=G(f,"Track Features"),f.forEach(u),t=M(o),r=j(),a.block.l(o)},m(o,f){p(o,e,f),I(e,l),p(o,t,f),p(o,r,f),a.block.m(o,a.anchor=f),a.mount=()=>r.parentNode,a.anchor=r,s=!0},p(o,f){i=o,a.ctx=i,f&16&&n!==(n=i[4])&&H(n,a)||O(a,i,f)},i(o){s||(_(a.block),s=!0)},o(o){for(let f=0;f<3;f+=1){const $=a.blocks[f];b($)}s=!1},d(o){o&&u(e),o&&u(t),o&&u(r),a.block.d(o),a.token=null,a=null}}}function De(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Fe(i){let e,l;return e=new R({props:{data:i[12]}}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,r){const n={};r&16&&(n.data=t[12]),e.$set(n)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Pe(i){let e,l;return e=new J({}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:m,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ae(i){let e,l,t,r,n,s,a={ctx:i,current:null,token:null,hasCatch:!1,pending:Ge,then:Ve,catch:Le,value:11,blocks:[,,,]};return H(n=i[3],a),{c(){e=D("h2"),l=V("Track Analysis"),t=S(),r=j(),a.block.c()},l(o){e=F(o,"H2",{});var f=E(e);l=G(f,"Track Analysis"),f.forEach(u),t=M(o),r=j(),a.block.l(o)},m(o,f){p(o,e,f),I(e,l),p(o,t,f),p(o,r,f),a.block.m(o,a.anchor=f),a.mount=()=>r.parentNode,a.anchor=r,s=!0},p(o,f){i=o,a.ctx=i,f&8&&n!==(n=i[3])&&H(n,a)||O(a,i,f)},i(o){s||(_(a.block),s=!0)},o(o){for(let f=0;f<3;f+=1){const $=a.blocks[f];b($)}s=!1},d(o){o&&u(e),o&&u(t),o&&u(r),a.block.d(o),a.token=null,a=null}}}function Le(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ve(i){let e,l;return e=new R({props:{data:i[11]}}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,r){const n={};r&8&&(n.data=t[11]),e.$set(n)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Ge(i){let e,l;return e=new J({}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:m,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ie(i){let e,l,t,r,n,s,a={ctx:i,current:null,token:null,hasCatch:!1,pending:qe,then:We,catch:Ie,value:10,blocks:[,,,]};return H(n=i[5],a),{c(){e=D("h2"),l=V("Artist"),t=S(),r=j(),a.block.c()},l(o){e=F(o,"H2",{});var f=E(e);l=G(f,"Artist"),f.forEach(u),t=M(o),r=j(),a.block.l(o)},m(o,f){p(o,e,f),I(e,l),p(o,t,f),p(o,r,f),a.block.m(o,a.anchor=f),a.mount=()=>r.parentNode,a.anchor=r,s=!0},p(o,f){i=o,a.ctx=i,f&32&&n!==(n=i[5])&&H(n,a)||O(a,i,f)},i(o){s||(_(a.block),s=!0)},o(o){for(let f=0;f<3;f+=1){const $=a.blocks[f];b($)}s=!1},d(o){o&&u(e),o&&u(t),o&&u(r),a.block.d(o),a.token=null,a=null}}}function Ie(i){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function We(i){let e,l;return e=new R({props:{data:i[10]}}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,r){const n={};r&32&&(n.data=t[10]),e.$set(n)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function qe(i){let e,l;return e=new J({}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p:m,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function ze(i){let e,l,t,r;const n=[Me,Se],s=[];function a(o,f){return(o[0]===""||o[7]==="")&&o[1]?0:1}return e=a(i),l=s[e]=n[e](i),{c(){l.c(),t=j()},l(o){l.l(o),t=j()},m(o,f){s[e].m(o,f),p(o,t,f),r=!0},p(o,f){let $=e;e=a(o),e===$?s[e].p(o,f):(P(),b(s[$],1,1,()=>{s[$]=null}),L(),l=s[e],l?l.p(o,f):(l=s[e]=n[e](o),l.c()),_(l,1),l.m(t.parentNode,t))},i(o){r||(_(l),r=!0)},o(o){b(l),r=!1},d(o){s[e].d(o),o&&u(t)}}}function Oe(i){let e,l;return e=new ke({props:{title:i[7]||"Track Analysis",$$slots:{default:[ze]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){A(e,t,r),l=!0},p(t,[r]){const n={};r&128&&(n.title=t[7]||"Track Analysis"),r&8447&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Je(i,e,l){let t;me(i,Z,h=>l(8,t=h));let{trackID:r=""}=e,n,s,a,o,f,$,B="";X(()=>{if(r===""){const h=new URLSearchParams(window.location.search);h.has("id")?(console.debug(h.get("id")),l(0,r=h.get("id")),t!=="empty"&&Z.valid()&&(l(1,n=he(t)),n.track(r).then(d=>{l(7,B=`${d.name} by ${d.artists[0].name}`)}),g())):_e(`${be}/data/search?categories=track`)}});const g=async()=>{l(2,s=n.track(r)),l(4,o=n.audioFeatures(r)),l(3,a=n.audioAnalysis(r)),l(5,f=n.artist(await(await s).artists[0].id)),l(6,$=$e(await n.audioAnalysis(r)))};return i.$$set=h=>{"trackID"in h&&l(0,r=h.trackID)},[r,n,s,a,o,f,$,B]}class rt extends W{constructor(e){super();q(this,e,Je,Oe,z,{trackID:0})}}export{rt as default};
