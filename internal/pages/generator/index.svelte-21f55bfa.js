var ke=Object.defineProperty;var x=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ee=(o,e,l)=>e in o?ke(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,F=(o,e)=>{for(var l in e||(e={}))ve.call(e,l)&&ee(o,l,e[l]);if(x)for(var l of x(e))ge.call(e,l)&&ee(o,l,e[l]);return o};import{S as te,i as le,s as re,e as E,t as P,k as j,c as A,a as T,g as C,n as H,d as p,b as h,O as B,f as D,H as b,L as U,h as N,U as ae,V as ne,I as L,Q as W,M as we,W as ye,j as X,N as Ee,m as Y,o as Z,x as I,u as S,v as J,A as Ae,l as M,X as q,Y as oe,r as R,w as z,R as se,Z as G,_ as K,$ as ie}from"../../chunks/vendor-a48984bb.js";import{P as Te}from"../../chunks/page-6db1e8cf.js";const De=o=>o?`?${Object.entries(o).map(e=>e[0]&&e[1]?`${e[0]}=${Array.isArray(e[1])?e[1].join(","):e[1]}`:"").join("&")}`:"",Ie="https://api.spotify.com/v1",Le=o=>{const e=new Headers([["Authorization",`Bearer ${o}`],["Content-Type","application/json"]]),l=async n=>{var s;return(await fetch(`${Ie}${n.route}${De(n.options)}`,{method:`${(s=n==null?void 0:n.method)!=null?s:"GET"}`,headers:e})).json()},a={me:async()=>l({route:"/me"}),topTracks:async n=>l({route:"/me/top/tracks",options:n}),topArtists:async n=>l({route:"/me/top/artists",options:n}),user:async n=>l({route:`/users/${n}`}),followedArtists:async n=>l({route:"/me/following",options:F({type:"artist"},n)}),followedArtistsCheck:async n=>l({route:"/me/following/contains",options:n}),followsPlaylistCheck:async(n,r)=>l({route:`/playlists/${n}/followers/contains`,options:r})},t={track:async n=>l({route:`/track/${n}`}),tracks:async n=>l({route:"/tracks",options:n}),savedTracks:async n=>l({route:"/me/tracks",options:n})};return F(F({},a),t)};function ce(o,e,l){const a=o.slice();return a[15]=e[l],a[17]=l,a}function ue(o){let e,l=o[15].label+"",a,t,n,r,s,i;function d(){return o[10](o[17])}return{c(){e=E("div"),a=P(l),t=j(),this.h()},l(u){e=A(u,"DIV",{value:!0,"aria-selected":!0,role:!0,class:!0,id:!0});var f=T(e);a=C(f,l),t=H(f),f.forEach(p),this.h()},h(){h(e,"value",n=o[15].value),h(e,"aria-selected","true"),h(e,"role","option"),h(e,"class","ds-option svelte-o3bmey"),h(e,"id",r=""+(o[1]+"-option-"+o[17])),B(e,"option-current",o[6]===o[17])},m(u,f){D(u,e,f),b(e,a),b(e,t),s||(i=U(e,"click",d),s=!0)},p(u,f){o=u,f&8&&l!==(l=o[15].label+"")&&N(a,l),f&8&&n!==(n=o[15].value)&&h(e,"value",n),f&2&&r!==(r=""+(o[1]+"-option-"+o[17]))&&h(e,"id",r),f&64&&B(e,"option-current",o[6]===o[17])},d(u){u&&p(e),s=!1,i()}}}function Se(o){let e,l,a,t,n,r,s,i=(o[4]!==-1?o[3][o[4]].label:o[2])+"",d,u,f,_,m,k,v,V=o[3],g=[];for(let c=0;c<V.length;c+=1)g[c]=ue(ce(o,V,c));return{c(){e=E("label"),l=P(o[0]),a=P(" -"),n=j(),r=E("div"),s=E("span"),d=P(i),f=j(),_=E("div");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){e=A(c,"LABEL",{for:!0,id:!0,class:!0});var y=T(e);l=C(y,o[0]),a=C(y," -"),y.forEach(p),n=H(c),r=A(c,"DIV",{class:!0,id:!0});var w=T(r);s=A(w,"SPAN",{"aria-controls":!0,"aria-haspopup":!0,role:!0,tabindex:!0,class:!0,"aria-activedescendant":!0});var O=T(s);d=C(O,i),O.forEach(p),f=H(w),_=A(w,"DIV",{role:!0,tabindex:!0,class:!0,id:!0,"aria-expanded":!0});var $=T(_);for(let Q=0;Q<g.length;Q+=1)g[Q].l($);$.forEach(p),w.forEach(p),this.h()},h(){h(e,"for",o[1]),h(e,"id",t=""+(o[1]+"-label")),h(e,"class","ds-label svelte-o3bmey"),h(s,"aria-controls","listbox"),h(s,"aria-haspopup","listbox"),h(s,"role","combobox"),h(s,"tabindex","0"),h(s,"class","ds-input svelte-o3bmey"),h(s,"aria-activedescendant",u=""+(o[1]+"-option-"+(o[6]>=0?o[6]:o[4]))),h(_,"role","listbox"),h(_,"tabindex","-1"),h(_,"class","ds-menu svelte-o3bmey"),h(_,"id",m=""+(o[1]+"-menu")),h(_,"aria-expanded",o[7]),B(_,"open",o[7]),h(r,"class","ds-main ds-select svelte-o3bmey"),h(r,"id",o[1]),B(r,"open",o[7])},m(c,y){D(c,e,y),b(e,l),b(e,a),D(c,n,y),D(c,r,y),b(r,s),b(s,d),b(r,f),b(r,_);for(let w=0;w<g.length;w+=1)g[w].m(_,null);k||(v=[U(_,"mousedown",o[11]),U(_,"mouseup",o[12]),U(r,"click",ae(ne(o[13]))),U(r,"blur",ae(ne(o[8])),!0),U(r,"keydown",o[9])],k=!0)},p(c,[y]){if(y&1&&N(l,c[0]),y&2&&h(e,"for",c[1]),y&2&&t!==(t=""+(c[1]+"-label"))&&h(e,"id",t),y&28&&i!==(i=(c[4]!==-1?c[3][c[4]].label:c[2])+"")&&N(d,i),y&82&&u!==(u=""+(c[1]+"-option-"+(c[6]>=0?c[6]:c[4])))&&h(s,"aria-activedescendant",u),y&90){V=c[3];let w;for(w=0;w<V.length;w+=1){const O=ce(c,V,w);g[w]?g[w].p(O,y):(g[w]=ue(O),g[w].c(),g[w].m(_,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=V.length}y&2&&m!==(m=""+(c[1]+"-menu"))&&h(_,"id",m),y&128&&h(_,"aria-expanded",c[7]),y&128&&B(_,"open",c[7]),y&2&&h(r,"id",c[1]),y&128&&B(r,"open",c[7])},i:L,o:L,d(c){c&&p(e),c&&p(n),c&&p(r),W(g,c),k=!1,we(v)}}}function Pe(o,e,l){let a,t,n;const r=ye();let{name:s="select"}=e,{id:i="example"}=e,{placeHolder:d=void 0}=e,{options:u}=e,f=!1;const _=()=>{if(f){l(5,f=!1);return}t&&!f&&l(7,t=!1)},m=c=>{if(t)switch(c.key){case" ":case"Enter":c.preventDefault(),l(4,a=n),l(7,t=!1);break;case"ArrowUp":{c.preventDefault(),n-1>=0&&l(6,n-=1);break}case"Tab":if(c.shiftKey){c.preventDefault(),n-1>=0&&l(6,n-=1);break}case"ArrowDown":{c.preventDefault(),n+1<u.length&&l(6,n+=1);break}case"Escape":c.preventDefault(),l(7,t=!1);break}else switch(c.key){case"ArrowUp":case"ArrowDown":case" ":case"Enter":c.preventDefault(),l(7,t=!0),l(6,n=a);break}},k=c=>{a!==c&&l(4,a=c)},v=()=>{l(5,f=!0)},V=()=>{l(5,f=!1)},g=()=>{l(6,n=-1),l(7,t=!t)};return o.$$set=c=>{"name"in c&&l(0,s=c.name),"id"in c&&l(1,i=c.id),"placeHolder"in c&&l(2,d=c.placeHolder),"options"in c&&l(3,u=c.options)},o.$$.update=()=>{o.$$.dirty&4&&l(4,a=d?typeof d=="string"?-1:d:0),o.$$.dirty&24&&a>=0&&a<u.length&&r("change",u[a])},l(7,t=!1),l(6,n=-1),[s,i,d,u,a,f,n,t,_,m,k,v,V,g]}class fe extends te{constructor(e){super();le(this,e,Pe,Se,re,{name:0,id:1,placeHolder:2,options:3})}}function _e(o,e,l){const a=o.slice();return a[6]=e[l],a}function he(o,e,l){const a=o.slice();return a[10]=e[l],a}function de(o){let e,l,a,t={ctx:o,current:null,token:null,hasCatch:!0,pending:je,then:Ve,catch:Ce,value:9,blocks:[,,,]};return q(l=o[2],t),{c(){e=M(),t.block.c()},l(n){e=M(),t.block.l(n)},m(n,r){D(n,e,r),t.block.m(n,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(n,r){o=n,t.ctx=o,r&4&&l!==(l=o[2])&&q(l,t)||oe(t,o,r)},i(n){a||(I(t.block),a=!0)},o(n){for(let r=0;r<3;r+=1){const s=t.blocks[r];S(s)}a=!1},d(n){n&&p(e),t.block.d(n),t.token=null,t=null}}}function Ce(o){let e,l;return{c(){e=E("div"),l=P("Failure")},l(a){e=A(a,"DIV",{});var t=T(e);l=C(t,"Failure"),t.forEach(p)},m(a,t){D(a,e,t),b(e,l)},p:L,i:L,o:L,d(a){a&&p(e)}}}function Ve(o){let e,l,a=o[9].items,t=[];for(let r=0;r<a.length;r+=1)t[r]=pe(he(o,a,r));const n=r=>S(t[r],1,1,()=>{t[r]=null});return{c(){e=E("ul");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=A(r,"UL",{});var s=T(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(p)},m(r,s){D(r,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(r,s){if(s&4){a=r[9].items;let i;for(i=0;i<a.length;i+=1){const d=he(r,a,i);t[i]?(t[i].p(d,s),I(t[i],1)):(t[i]=pe(d),t[i].c(),I(t[i],1),t[i].m(e,null))}for(R(),i=a.length;i<t.length;i+=1)n(i);z()}},i(r){if(!l){for(let s=0;s<a.length;s+=1)I(t[s]);l=!0}},o(r){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)S(t[s]);l=!1},d(r){r&&p(e),W(t,r)}}}function pe(o){let e,l,a=o[10].name+"",t,n,r,s,i=o[10].artists[0].name+"",d,u,f,_,m;return{c(){e=E("li"),l=E("a"),t=P(a),r=P(`
								by
								`),s=E("a"),d=P(i),f=j(),this.h()},l(k){e=A(k,"LI",{class:!0});var v=T(e);l=A(v,"A",{href:!0});var V=T(l);t=C(V,a),V.forEach(p),r=C(v,`
								by
								`),s=A(v,"A",{href:!0});var g=T(s);d=C(g,i),g.forEach(p),f=H(v),v.forEach(p),this.h()},h(){h(l,"href",n=o[10].external_urls.spotify),h(s,"href",u=o[10].artists[0].external_urls.spotify),h(e,"class","svelte-1u1rp16")},m(k,v){D(k,e,v),b(e,l),b(l,t),b(e,r),b(e,s),b(s,d),b(e,f),m=!0},p(k,v){(!m||v&4)&&a!==(a=k[10].name+"")&&N(t,a),(!m||v&4&&n!==(n=k[10].external_urls.spotify))&&h(l,"href",n),(!m||v&4)&&i!==(i=k[10].artists[0].name+"")&&N(d,i),(!m||v&4&&u!==(u=k[10].artists[0].external_urls.spotify))&&h(s,"href",u)},i(k){m||(se(()=>{_||(_=G(e,K,{delay:0,duration:500},!0)),_.run(1)}),m=!0)},o(k){_||(_=G(e,K,{delay:0,duration:500},!1)),_.run(0),m=!1},d(k){k&&p(e),k&&_&&_.end()}}}function je(o){let e,l;return{c(){e=E("div"),l=P("Loading...")},l(a){e=A(a,"DIV",{});var t=T(e);l=C(t,"Loading..."),t.forEach(p)},m(a,t){D(a,e,t),b(e,l)},p:L,i:L,o:L,d(a){a&&p(e)}}}function me(o){let e,l,a,t={ctx:o,current:null,token:null,hasCatch:!0,pending:Ue,then:Be,catch:He,value:5,blocks:[,,,]};return q(l=o[1],t),{c(){e=M(),t.block.c()},l(n){e=M(),t.block.l(n)},m(n,r){D(n,e,r),t.block.m(n,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(n,r){o=n,t.ctx=o,r&2&&l!==(l=o[1])&&q(l,t)||oe(t,o,r)},i(n){a||(I(t.block),a=!0)},o(n){for(let r=0;r<3;r+=1){const s=t.blocks[r];S(s)}a=!1},d(n){n&&p(e),t.block.d(n),t.token=null,t=null}}}function He(o){let e,l;return{c(){e=E("div"),l=P("Failure")},l(a){e=A(a,"DIV",{});var t=T(e);l=C(t,"Failure"),t.forEach(p)},m(a,t){D(a,e,t),b(e,l)},p:L,i:L,o:L,d(a){a&&p(e)}}}function Be(o){let e,l,a=o[5].items,t=[];for(let r=0;r<a.length;r+=1)t[r]=be(_e(o,a,r));const n=r=>S(t[r],1,1,()=>{t[r]=null});return{c(){e=E("ul");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=A(r,"UL",{});var s=T(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(p)},m(r,s){D(r,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(r,s){if(s&2){a=r[5].items;let i;for(i=0;i<a.length;i+=1){const d=_e(r,a,i);t[i]?(t[i].p(d,s),I(t[i],1)):(t[i]=be(d),t[i].c(),I(t[i],1),t[i].m(e,null))}for(R(),i=a.length;i<t.length;i+=1)n(i);z()}},i(r){if(!l){for(let s=0;s<a.length;s+=1)I(t[s]);l=!0}},o(r){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)S(t[s]);l=!1},d(r){r&&p(e),W(t,r)}}}function be(o){let e,l,a=o[6].name+"",t,n,r,s,i;return{c(){e=E("li"),l=E("a"),t=P(a),r=j(),this.h()},l(d){e=A(d,"LI",{class:!0});var u=T(e);l=A(u,"A",{href:!0});var f=T(l);t=C(f,a),f.forEach(p),r=H(u),u.forEach(p),this.h()},h(){h(l,"href",n=o[6].external_urls.spotify),h(e,"class","svelte-1u1rp16")},m(d,u){D(d,e,u),b(e,l),b(l,t),b(e,r),i=!0},p(d,u){o=d,(!i||u&2)&&a!==(a=o[6].name+"")&&N(t,a),(!i||u&2&&n!==(n=o[6].external_urls.spotify))&&h(l,"href",n)},i(d){i||(se(()=>{s||(s=G(e,K,{delay:0,duration:500,easing:ie},!0)),s.run(1)}),i=!0)},o(d){s||(s=G(e,K,{delay:0,duration:500,easing:ie},!1)),s.run(0),i=!1},d(d){d&&p(e),d&&s&&s.end()}}}function Ue(o){let e,l;return{c(){e=E("div"),l=P("Loading...")},l(a){e=A(a,"DIV",{});var t=T(e);l=C(t,"Loading..."),t.forEach(p)},m(a,t){D(a,e,t),b(e,l)},p:L,i:L,o:L,d(a){a&&p(e)}}}function Ne(o){let e,l,a,t,n,r,s,i,d;a=new fe({props:{name:"Top Tracks",id:"top-tracks",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),a.$on("change",o[3]);let u=o[2]instanceof Promise&&de(o);s=new fe({props:{name:"Top Artists",id:"top-artists",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),s.$on("change",o[4]);let f=o[1]instanceof Promise&&me(o);return{c(){e=E("div"),l=E("section"),X(a.$$.fragment),t=j(),u&&u.c(),n=j(),r=E("section"),X(s.$$.fragment),i=j(),f&&f.c(),this.h()},l(_){e=A(_,"DIV",{id:!0,class:!0});var m=T(e);l=A(m,"SECTION",{class:!0});var k=T(l);Y(a.$$.fragment,k),t=H(k),u&&u.l(k),k.forEach(p),n=H(m),r=A(m,"SECTION",{class:!0});var v=T(r);Y(s.$$.fragment,v),i=H(v),f&&f.l(v),v.forEach(p),m.forEach(p),this.h()},h(){h(l,"class","svelte-1u1rp16"),h(r,"class","svelte-1u1rp16"),h(e,"id","top"),h(e,"class","svelte-1u1rp16")},m(_,m){D(_,e,m),b(e,l),Z(a,l,null),b(l,t),u&&u.m(l,null),b(e,n),b(e,r),Z(s,r,null),b(r,i),f&&f.m(r,null),d=!0},p(_,m){_[2]instanceof Promise?u?(u.p(_,m),m&4&&I(u,1)):(u=de(_),u.c(),I(u,1),u.m(l,null)):u&&(R(),S(u,1,1,()=>{u=null}),z()),_[1]instanceof Promise?f?(f.p(_,m),m&2&&I(f,1)):(f=me(_),f.c(),I(f,1),f.m(r,null)):f&&(R(),S(f,1,1,()=>{f=null}),z())},i(_){d||(I(a.$$.fragment,_),I(u),I(s.$$.fragment,_),I(f),d=!0)},o(_){S(a.$$.fragment,_),S(u),S(s.$$.fragment,_),S(f),d=!1},d(_){_&&p(e),J(a),u&&u.d(),J(s),f&&f.d()}}}function Oe(o){let e,l,a,t;return a=new Te({props:{title:"Top Spotify info",$$slots:{default:[Ne]},$$scope:{ctx:o}}}),{c(){e=j(),l=j(),X(a.$$.fragment),this.h()},l(n){Ee('[data-svelte="svelte-1998kk8"]',document.head).forEach(p),e=H(n),l=H(n),Y(a.$$.fragment,n),this.h()},h(){document.title="Top Spotify info"},m(n,r){D(n,e,r),D(n,l,r),Z(a,n,r),t=!0},p(n,[r]){const s={};r&8199&&(s.$$scope={dirty:r,ctx:n}),a.$set(s)},i(n){t||(I(a.$$.fragment,n),t=!0)},o(n){S(a.$$.fragment,n),t=!1},d(n){n&&p(e),n&&p(l),J(a,n)}}}function Fe(o,e,l){let a,t,n;Ae(()=>{const i=new URLSearchParams(window.location.search);l(0,n=Le(i.get("token"))),l(2,t=n.topTracks({time_range:"long_term"})),l(1,a=n.topArtists({time_range:"long_term"}))});const r=i=>{l(2,t=n.topTracks({time_range:i.detail.value}))},s=i=>{l(1,a=n.topArtists({time_range:i.detail.value}))};return l(1,a=void 0),l(2,t=void 0),[n,a,t,r,s]}class ze extends te{constructor(e){super();le(this,e,Fe,Oe,re,{})}}export{ze as default};
