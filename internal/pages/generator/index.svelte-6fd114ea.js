import{S as $,i as x,s as ee,e as y,t as V,k as H,c as D,a as A,g as S,n as U,d as m,b as d,T as j,f as I,H as b,L as C,h as F,U as te,V as le,I as T,P as Q,M as me,W as pe,j as W,N as be,m as X,o as Y,x as L,u as P,v as Z,A as ve,l as M,X as N,Y as ne,r as q,w as z,Q as re,Z as O,_ as R,$ as ae}from"../../chunks/vendor-4aa8f7af.js";import{P as ge}from"../../chunks/page-bc2d2128.js";const ke=a=>a?`?${Object.entries(a).map(e=>e[0]&&e[1]?`${e[0]}=${e[1]}`:"").join("&")}`:"";class we{constructor(e){this.BASE_URL="https://api.spotify.com/v1",this.me=async()=>this.fetch("/me"),this.topTracks=async l=>this.fetch("/me/top/tracks",l),this.topArtists=async l=>this.fetch("/me/top/artists",l),this.user=async l=>this.fetch(`/users/${l}`),this.fetch=async(l,r,t="GET")=>(await fetch(`${this.BASE_URL}${l}${ke(r)}`,{method:`${t}`,headers:this.head})).json(),this.head=new Headers([["Authorization",`Bearer ${e}`],["Content-Type","application/json"]])}}function oe(a,e,l){const r=a.slice();return r[15]=e[l],r[17]=l,r}function se(a){let e,l=a[15].label+"",r,t,o,n,s,i;function _(){return a[10](a[17])}return{c(){e=y("div"),r=V(l),t=H(),this.h()},l(c){e=D(c,"DIV",{value:!0,"aria-selected":!0,role:!0,class:!0,id:!0});var f=A(e);r=S(f,l),t=U(f),f.forEach(m),this.h()},h(){d(e,"value",o=a[15].value),d(e,"aria-selected","true"),d(e,"role","option"),d(e,"class","ds-option svelte-o3bmey"),d(e,"id",n=""+(a[1]+"-option-"+a[17])),j(e,"option-current",a[6]===a[17])},m(c,f){I(c,e,f),b(e,r),b(e,t),s||(i=C(e,"click",_),s=!0)},p(c,f){a=c,f&8&&l!==(l=a[15].label+"")&&F(r,l),f&8&&o!==(o=a[15].value)&&d(e,"value",o),f&2&&n!==(n=""+(a[1]+"-option-"+a[17]))&&d(e,"id",n),f&64&&j(e,"option-current",a[6]===a[17])},d(c){c&&m(e),s=!1,i()}}}function Ee(a){let e,l,r,t,o,n,s,i=(a[4]!==-1?a[3][a[4]].label:a[2])+"",_,c,f,h,p,v,g,B=a[3],k=[];for(let u=0;u<B.length;u+=1)k[u]=se(oe(a,B,u));return{c(){e=y("label"),l=V(a[0]),r=V(" -"),o=H(),n=y("div"),s=y("span"),_=V(i),f=H(),h=y("div");for(let u=0;u<k.length;u+=1)k[u].c();this.h()},l(u){e=D(u,"LABEL",{for:!0,id:!0,class:!0});var E=A(e);l=S(E,a[0]),r=S(E," -"),E.forEach(m),o=U(u),n=D(u,"DIV",{class:!0,id:!0});var w=A(n);s=D(w,"SPAN",{"aria-controls":!0,"aria-haspopup":!0,role:!0,tabindex:!0,class:!0,"aria-activedescendant":!0});var G=A(s);_=S(G,i),G.forEach(m),f=U(w),h=D(w,"DIV",{role:!0,tabindex:!0,class:!0,id:!0,"aria-expanded":!0});var J=A(h);for(let K=0;K<k.length;K+=1)k[K].l(J);J.forEach(m),w.forEach(m),this.h()},h(){d(e,"for",a[1]),d(e,"id",t=""+(a[1]+"-label")),d(e,"class","ds-label svelte-o3bmey"),d(s,"aria-controls","listbox"),d(s,"aria-haspopup","listbox"),d(s,"role","combobox"),d(s,"tabindex","0"),d(s,"class","ds-input svelte-o3bmey"),d(s,"aria-activedescendant",c=""+(a[1]+"-option-"+(a[6]>=0?a[6]:a[4]))),d(h,"role","listbox"),d(h,"tabindex","-1"),d(h,"class","ds-menu svelte-o3bmey"),d(h,"id",p=""+(a[1]+"-menu")),d(h,"aria-expanded",a[7]),j(h,"open",a[7]),d(n,"class","ds-main ds-select svelte-o3bmey"),d(n,"id",a[1]),j(n,"open",a[7])},m(u,E){I(u,e,E),b(e,l),b(e,r),I(u,o,E),I(u,n,E),b(n,s),b(s,_),b(n,f),b(n,h);for(let w=0;w<k.length;w+=1)k[w].m(h,null);v||(g=[C(h,"mousedown",a[11]),C(h,"mouseup",a[12]),C(n,"click",te(le(a[13]))),C(n,"blur",te(le(a[8])),!0),C(n,"keydown",a[9])],v=!0)},p(u,[E]){if(E&1&&F(l,u[0]),E&2&&d(e,"for",u[1]),E&2&&t!==(t=""+(u[1]+"-label"))&&d(e,"id",t),E&28&&i!==(i=(u[4]!==-1?u[3][u[4]].label:u[2])+"")&&F(_,i),E&82&&c!==(c=""+(u[1]+"-option-"+(u[6]>=0?u[6]:u[4])))&&d(s,"aria-activedescendant",c),E&90){B=u[3];let w;for(w=0;w<B.length;w+=1){const G=oe(u,B,w);k[w]?k[w].p(G,E):(k[w]=se(G),k[w].c(),k[w].m(h,null))}for(;w<k.length;w+=1)k[w].d(1);k.length=B.length}E&2&&p!==(p=""+(u[1]+"-menu"))&&d(h,"id",p),E&128&&d(h,"aria-expanded",u[7]),E&128&&j(h,"open",u[7]),E&2&&d(n,"id",u[1]),E&128&&j(n,"open",u[7])},i:T,o:T,d(u){u&&m(e),u&&m(o),u&&m(n),Q(k,u),v=!1,me(g)}}}function ye(a,e,l){let r,t,o;const n=pe();let{name:s="select"}=e,{id:i="example"}=e,{placeHolder:_=void 0}=e,{options:c}=e,f=!1;const h=()=>{if(f){l(5,f=!1);return}t&&!f&&l(7,t=!1)},p=u=>{if(t)switch(u.key){case" ":case"Enter":u.preventDefault(),l(4,r=o),l(7,t=!1);break;case"ArrowUp":{u.preventDefault(),o-1>=0&&l(6,o-=1);break}case"Tab":if(u.shiftKey){u.preventDefault(),o-1>=0&&l(6,o-=1);break}case"ArrowDown":{u.preventDefault(),o+1<c.length&&l(6,o+=1);break}case"Escape":u.preventDefault(),l(7,t=!1);break}else switch(u.key){case"ArrowUp":case"ArrowDown":case" ":case"Enter":u.preventDefault(),l(7,t=!0),l(6,o=r);break}},v=u=>{r!==u&&l(4,r=u)},g=()=>{l(5,f=!0)},B=()=>{l(5,f=!1)},k=()=>{l(6,o=-1),l(7,t=!t)};return a.$$set=u=>{"name"in u&&l(0,s=u.name),"id"in u&&l(1,i=u.id),"placeHolder"in u&&l(2,_=u.placeHolder),"options"in u&&l(3,c=u.options)},a.$$.update=()=>{a.$$.dirty&4&&l(4,r=_?typeof _=="string"?-1:_:0),a.$$.dirty&24&&r>=0&&r<c.length&&n("change",c[r])},l(7,t=!1),l(6,o=-1),[s,i,_,c,r,f,o,t,h,p,v,g,B,k]}class ie extends ${constructor(e){super();x(this,e,ye,Ee,ee,{name:0,id:1,placeHolder:2,options:3})}}function ue(a,e,l){const r=a.slice();return r[6]=e[l],r}function ce(a,e,l){const r=a.slice();return r[10]=e[l],r}function fe(a){let e,l,r,t={ctx:a,current:null,token:null,hasCatch:!0,pending:Ie,then:Ae,catch:De,value:9,blocks:[,,,]};return N(l=a[2],t),{c(){e=M(),t.block.c()},l(o){e=M(),t.block.l(o)},m(o,n){I(o,e,n),t.block.m(o,t.anchor=n),t.mount=()=>e.parentNode,t.anchor=e,r=!0},p(o,n){a=o,t.ctx=a,n&4&&l!==(l=a[2])&&N(l,t)||ne(t,a,n)},i(o){r||(L(t.block),r=!0)},o(o){for(let n=0;n<3;n+=1){const s=t.blocks[n];P(s)}r=!1},d(o){o&&m(e),t.block.d(o),t.token=null,t=null}}}function De(a){let e,l;return{c(){e=y("div"),l=V("Failure")},l(r){e=D(r,"DIV",{});var t=A(e);l=S(t,"Failure"),t.forEach(m)},m(r,t){I(r,e,t),b(e,l)},p:T,i:T,o:T,d(r){r&&m(e)}}}function Ae(a){let e,l,r=a[9].items,t=[];for(let n=0;n<r.length;n+=1)t[n]=he(ce(a,r,n));const o=n=>P(t[n],1,1,()=>{t[n]=null});return{c(){e=y("ul");for(let n=0;n<t.length;n+=1)t[n].c()},l(n){e=D(n,"UL",{});var s=A(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(m)},m(n,s){I(n,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(n,s){if(s&4){r=n[9].items;let i;for(i=0;i<r.length;i+=1){const _=ce(n,r,i);t[i]?(t[i].p(_,s),L(t[i],1)):(t[i]=he(_),t[i].c(),L(t[i],1),t[i].m(e,null))}for(q(),i=r.length;i<t.length;i+=1)o(i);z()}},i(n){if(!l){for(let s=0;s<r.length;s+=1)L(t[s]);l=!0}},o(n){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)P(t[s]);l=!1},d(n){n&&m(e),Q(t,n)}}}function he(a){let e,l,r=a[10].name+"",t,o,n,s,i=a[10].artists[0].name+"",_,c,f,h,p;return{c(){e=y("li"),l=y("a"),t=V(r),n=V(`
								by
								`),s=y("a"),_=V(i),f=H(),this.h()},l(v){e=D(v,"LI",{class:!0});var g=A(e);l=D(g,"A",{href:!0});var B=A(l);t=S(B,r),B.forEach(m),n=S(g,`
								by
								`),s=D(g,"A",{href:!0});var k=A(s);_=S(k,i),k.forEach(m),f=U(g),g.forEach(m),this.h()},h(){d(l,"href",o=a[10].external_urls.spotify),d(s,"href",c=a[10].artists[0].external_urls.spotify),d(e,"class","svelte-go1yxl")},m(v,g){I(v,e,g),b(e,l),b(l,t),b(e,n),b(e,s),b(s,_),b(e,f),p=!0},p(v,g){(!p||g&4)&&r!==(r=v[10].name+"")&&F(t,r),(!p||g&4&&o!==(o=v[10].external_urls.spotify))&&d(l,"href",o),(!p||g&4)&&i!==(i=v[10].artists[0].name+"")&&F(_,i),(!p||g&4&&c!==(c=v[10].artists[0].external_urls.spotify))&&d(s,"href",c)},i(v){p||(re(()=>{h||(h=O(e,R,{delay:0,duration:500},!0)),h.run(1)}),p=!0)},o(v){h||(h=O(e,R,{delay:0,duration:500},!1)),h.run(0),p=!1},d(v){v&&m(e),v&&h&&h.end()}}}function Ie(a){let e,l;return{c(){e=y("div"),l=V("Loading...")},l(r){e=D(r,"DIV",{});var t=A(e);l=S(t,"Loading..."),t.forEach(m)},m(r,t){I(r,e,t),b(e,l)},p:T,i:T,o:T,d(r){r&&m(e)}}}function _e(a){let e,l,r,t={ctx:a,current:null,token:null,hasCatch:!0,pending:Pe,then:Te,catch:Le,value:5,blocks:[,,,]};return N(l=a[1],t),{c(){e=M(),t.block.c()},l(o){e=M(),t.block.l(o)},m(o,n){I(o,e,n),t.block.m(o,t.anchor=n),t.mount=()=>e.parentNode,t.anchor=e,r=!0},p(o,n){a=o,t.ctx=a,n&2&&l!==(l=a[1])&&N(l,t)||ne(t,a,n)},i(o){r||(L(t.block),r=!0)},o(o){for(let n=0;n<3;n+=1){const s=t.blocks[n];P(s)}r=!1},d(o){o&&m(e),t.block.d(o),t.token=null,t=null}}}function Le(a){let e,l;return{c(){e=y("div"),l=V("Failure")},l(r){e=D(r,"DIV",{});var t=A(e);l=S(t,"Failure"),t.forEach(m)},m(r,t){I(r,e,t),b(e,l)},p:T,i:T,o:T,d(r){r&&m(e)}}}function Te(a){let e,l,r=a[5].items,t=[];for(let n=0;n<r.length;n+=1)t[n]=de(ue(a,r,n));const o=n=>P(t[n],1,1,()=>{t[n]=null});return{c(){e=y("ul");for(let n=0;n<t.length;n+=1)t[n].c()},l(n){e=D(n,"UL",{});var s=A(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(m)},m(n,s){I(n,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(n,s){if(s&2){r=n[5].items;let i;for(i=0;i<r.length;i+=1){const _=ue(n,r,i);t[i]?(t[i].p(_,s),L(t[i],1)):(t[i]=de(_),t[i].c(),L(t[i],1),t[i].m(e,null))}for(q(),i=r.length;i<t.length;i+=1)o(i);z()}},i(n){if(!l){for(let s=0;s<r.length;s+=1)L(t[s]);l=!0}},o(n){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)P(t[s]);l=!1},d(n){n&&m(e),Q(t,n)}}}function de(a){let e,l,r=a[6].name+"",t,o,n,s,i;return{c(){e=y("li"),l=y("a"),t=V(r),n=H(),this.h()},l(_){e=D(_,"LI",{class:!0});var c=A(e);l=D(c,"A",{href:!0});var f=A(l);t=S(f,r),f.forEach(m),n=U(c),c.forEach(m),this.h()},h(){d(l,"href",o=a[6].external_urls.spotify),d(e,"class","svelte-go1yxl")},m(_,c){I(_,e,c),b(e,l),b(l,t),b(e,n),i=!0},p(_,c){a=_,(!i||c&2)&&r!==(r=a[6].name+"")&&F(t,r),(!i||c&2&&o!==(o=a[6].external_urls.spotify))&&d(l,"href",o)},i(_){i||(re(()=>{s||(s=O(e,R,{delay:0,duration:500,easing:ae},!0)),s.run(1)}),i=!0)},o(_){s||(s=O(e,R,{delay:0,duration:500,easing:ae},!1)),s.run(0),i=!1},d(_){_&&m(e),_&&s&&s.end()}}}function Pe(a){let e,l;return{c(){e=y("div"),l=V("Loading...")},l(r){e=D(r,"DIV",{});var t=A(e);l=S(t,"Loading..."),t.forEach(m)},m(r,t){I(r,e,t),b(e,l)},p:T,i:T,o:T,d(r){r&&m(e)}}}function Ve(a){let e,l,r,t,o,n,s,i,_;r=new ie({props:{name:"Top Tracks",id:"top-tracks",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),r.$on("change",a[3]);let c=a[2]instanceof Promise&&fe(a);s=new ie({props:{name:"Top Artists",id:"top-artists",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),s.$on("change",a[4]);let f=a[1]instanceof Promise&&_e(a);return{c(){e=y("div"),l=y("div"),W(r.$$.fragment),t=H(),c&&c.c(),o=H(),n=y("div"),W(s.$$.fragment),i=H(),f&&f.c(),this.h()},l(h){e=D(h,"DIV",{id:!0,class:!0});var p=A(e);l=D(p,"DIV",{});var v=A(l);X(r.$$.fragment,v),t=U(v),c&&c.l(v),v.forEach(m),o=U(p),n=D(p,"DIV",{});var g=A(n);X(s.$$.fragment,g),i=U(g),f&&f.l(g),g.forEach(m),p.forEach(m),this.h()},h(){d(e,"id","top"),d(e,"class","cols")},m(h,p){I(h,e,p),b(e,l),Y(r,l,null),b(l,t),c&&c.m(l,null),b(e,o),b(e,n),Y(s,n,null),b(n,i),f&&f.m(n,null),_=!0},p(h,p){h[2]instanceof Promise?c?(c.p(h,p),p&4&&L(c,1)):(c=fe(h),c.c(),L(c,1),c.m(l,null)):c&&(q(),P(c,1,1,()=>{c=null}),z()),h[1]instanceof Promise?f?(f.p(h,p),p&2&&L(f,1)):(f=_e(h),f.c(),L(f,1),f.m(n,null)):f&&(q(),P(f,1,1,()=>{f=null}),z())},i(h){_||(L(r.$$.fragment,h),L(c),L(s.$$.fragment,h),L(f),_=!0)},o(h){P(r.$$.fragment,h),P(c),P(s.$$.fragment,h),P(f),_=!1},d(h){h&&m(e),Z(r),c&&c.d(),Z(s),f&&f.d()}}}function Se(a){let e,l,r,t;return r=new ge({props:{title:"Generator",$$slots:{default:[Ve]},$$scope:{ctx:a}}}),{c(){e=H(),l=H(),W(r.$$.fragment),this.h()},l(o){be('[data-svelte="svelte-ny9739"]',document.head).forEach(m),e=U(o),l=U(o),X(r.$$.fragment,o),this.h()},h(){document.title="Generation"},m(o,n){I(o,e,n),I(o,l,n),Y(r,o,n),t=!0},p(o,[n]){const s={};n&8199&&(s.$$scope={dirty:n,ctx:o}),r.$set(s)},i(o){t||(L(r.$$.fragment,o),t=!0)},o(o){P(r.$$.fragment,o),t=!1},d(o){o&&m(e),o&&m(l),Z(r,o)}}}function Be(a,e,l){let r,t,o;ve(()=>{const i=new URLSearchParams(window.location.search);console.log(i.get("token")),l(0,o=new we(i.get("token"))),console.log(o.head.get("Authorization")),l(2,t=o.topTracks({time_range:"long_term"})),l(1,r=o.topArtists({time_range:"long_term"}))});const n=i=>{l(2,t=o.topTracks({time_range:i.detail.value}))},s=i=>{l(1,r=o.topArtists({time_range:i.detail.value}))};return l(1,r=void 0),l(2,t=void 0),[o,r,t,n,s]}class je extends ${constructor(e){super();x(this,e,Be,Se,ee,{})}}export{je as default};
