import{S as $,i as x,s as ee,e as y,t as V,k as H,c as D,a as A,g as S,n as U,d as m,b as d,T as j,f as I,H as b,L as C,h as F,U as te,V as le,I as T,P as Q,M as me,W as pe,j as W,N as be,m as X,o as Y,x as L,u as P,v as Z,A as ve,l as M,X as N,Y as re,r as q,w as O,Q as ae,Z as R,_ as z,$ as ne}from"../../chunks/vendor-4aa8f7af.js";import{P as ge}from"../../chunks/page-bc2d2128.js";const ke=n=>n?`?${Object.entries(n).map(e=>e[0]&&e[1]?`${e[0]}=${e[1]}`:"").join("&")}`:"";class we{constructor(e){this.BASE_URL="https://api.spotify.com/v1",this.me=async()=>this.fetch("/me"),this.topTracks=async l=>this.fetch("/me/top/tracks",l),this.topArtists=async l=>this.fetch("/me/top/artists",l),this.user=async l=>this.fetch(`/users/${l}`),this.fetch=async(l,a,t="GET")=>(await fetch(`${this.BASE_URL}${l}${ke(a)}`,{method:`${t}`,headers:this.head})).json(),this.head=new Headers([["Authorization",`Bearer ${e}`],["Content-Type","application/json"]])}}function oe(n,e,l){const a=n.slice();return a[15]=e[l],a[17]=l,a}function se(n){let e,l=n[15].label+"",a,t,o,r,s,i;function _(){return n[10](n[17])}return{c(){e=y("div"),a=V(l),t=H(),this.h()},l(f){e=D(f,"DIV",{value:!0,"aria-selected":!0,role:!0,class:!0,id:!0});var c=A(e);a=S(c,l),t=U(c),c.forEach(m),this.h()},h(){d(e,"value",o=n[15].value),d(e,"aria-selected","true"),d(e,"role","option"),d(e,"class","ds-option svelte-o3bmey"),d(e,"id",r=""+(n[1]+"-option-"+n[17])),j(e,"option-current",n[6]===n[17])},m(f,c){I(f,e,c),b(e,a),b(e,t),s||(i=C(e,"click",_),s=!0)},p(f,c){n=f,c&8&&l!==(l=n[15].label+"")&&F(a,l),c&8&&o!==(o=n[15].value)&&d(e,"value",o),c&2&&r!==(r=""+(n[1]+"-option-"+n[17]))&&d(e,"id",r),c&64&&j(e,"option-current",n[6]===n[17])},d(f){f&&m(e),s=!1,i()}}}function Ee(n){let e,l,a,t,o,r,s,i=(n[4]!==-1?n[3][n[4]].label:n[2])+"",_,f,c,h,p,v,g,B=n[3],k=[];for(let u=0;u<B.length;u+=1)k[u]=se(oe(n,B,u));return{c(){e=y("label"),l=V(n[0]),a=V(" -"),o=H(),r=y("div"),s=y("span"),_=V(i),c=H(),h=y("div");for(let u=0;u<k.length;u+=1)k[u].c();this.h()},l(u){e=D(u,"LABEL",{for:!0,id:!0,class:!0});var E=A(e);l=S(E,n[0]),a=S(E," -"),E.forEach(m),o=U(u),r=D(u,"DIV",{class:!0,id:!0});var w=A(r);s=D(w,"SPAN",{"aria-controls":!0,"aria-haspopup":!0,role:!0,tabindex:!0,class:!0,"aria-activedescendant":!0});var G=A(s);_=S(G,i),G.forEach(m),c=U(w),h=D(w,"DIV",{role:!0,tabindex:!0,class:!0,id:!0,"aria-expanded":!0});var J=A(h);for(let K=0;K<k.length;K+=1)k[K].l(J);J.forEach(m),w.forEach(m),this.h()},h(){d(e,"for",n[1]),d(e,"id",t=""+(n[1]+"-label")),d(e,"class","ds-label svelte-o3bmey"),d(s,"aria-controls","listbox"),d(s,"aria-haspopup","listbox"),d(s,"role","combobox"),d(s,"tabindex","0"),d(s,"class","ds-input svelte-o3bmey"),d(s,"aria-activedescendant",f=""+(n[1]+"-option-"+(n[6]>=0?n[6]:n[4]))),d(h,"role","listbox"),d(h,"tabindex","-1"),d(h,"class","ds-menu svelte-o3bmey"),d(h,"id",p=""+(n[1]+"-menu")),d(h,"aria-expanded",n[7]),j(h,"open",n[7]),d(r,"class","ds-main ds-select svelte-o3bmey"),d(r,"id",n[1]),j(r,"open",n[7])},m(u,E){I(u,e,E),b(e,l),b(e,a),I(u,o,E),I(u,r,E),b(r,s),b(s,_),b(r,c),b(r,h);for(let w=0;w<k.length;w+=1)k[w].m(h,null);v||(g=[C(h,"mousedown",n[11]),C(h,"mouseup",n[12]),C(r,"click",te(le(n[13]))),C(r,"blur",te(le(n[8])),!0),C(r,"keydown",n[9])],v=!0)},p(u,[E]){if(E&1&&F(l,u[0]),E&2&&d(e,"for",u[1]),E&2&&t!==(t=""+(u[1]+"-label"))&&d(e,"id",t),E&28&&i!==(i=(u[4]!==-1?u[3][u[4]].label:u[2])+"")&&F(_,i),E&82&&f!==(f=""+(u[1]+"-option-"+(u[6]>=0?u[6]:u[4])))&&d(s,"aria-activedescendant",f),E&90){B=u[3];let w;for(w=0;w<B.length;w+=1){const G=oe(u,B,w);k[w]?k[w].p(G,E):(k[w]=se(G),k[w].c(),k[w].m(h,null))}for(;w<k.length;w+=1)k[w].d(1);k.length=B.length}E&2&&p!==(p=""+(u[1]+"-menu"))&&d(h,"id",p),E&128&&d(h,"aria-expanded",u[7]),E&128&&j(h,"open",u[7]),E&2&&d(r,"id",u[1]),E&128&&j(r,"open",u[7])},i:T,o:T,d(u){u&&m(e),u&&m(o),u&&m(r),Q(k,u),v=!1,me(g)}}}function ye(n,e,l){let a,t,o;const r=pe();let{name:s="select"}=e,{id:i="example"}=e,{placeHolder:_=void 0}=e,{options:f}=e,c=!1;const h=()=>{if(c){l(5,c=!1);return}t&&!c&&l(7,t=!1)},p=u=>{if(t)switch(u.key){case" ":case"Enter":u.preventDefault(),l(4,a=o),l(7,t=!1);break;case"ArrowUp":{u.preventDefault(),o-1>=0&&l(6,o-=1);break}case"Tab":if(u.shiftKey){u.preventDefault(),o-1>=0&&l(6,o-=1);break}case"ArrowDown":{u.preventDefault(),o+1<f.length&&l(6,o+=1);break}case"Escape":u.preventDefault(),l(7,t=!1);break}else switch(u.key){case"ArrowUp":case"ArrowDown":case" ":case"Enter":u.preventDefault(),l(7,t=!0),l(6,o=a);break}},v=u=>{a!==u&&l(4,a=u)},g=()=>{l(5,c=!0)},B=()=>{l(5,c=!1)},k=()=>{l(6,o=-1),l(7,t=!t)};return n.$$set=u=>{"name"in u&&l(0,s=u.name),"id"in u&&l(1,i=u.id),"placeHolder"in u&&l(2,_=u.placeHolder),"options"in u&&l(3,f=u.options)},n.$$.update=()=>{n.$$.dirty&4&&l(4,a=_?typeof _=="string"?-1:_:0),n.$$.dirty&24&&a>=0&&a<f.length&&r("change",f[a])},l(7,t=!1),l(6,o=-1),[s,i,_,f,a,c,o,t,h,p,v,g,B,k]}class ie extends ${constructor(e){super();x(this,e,ye,Ee,ee,{name:0,id:1,placeHolder:2,options:3})}}function ue(n,e,l){const a=n.slice();return a[6]=e[l],a}function fe(n,e,l){const a=n.slice();return a[10]=e[l],a}function ce(n){let e,l,a,t={ctx:n,current:null,token:null,hasCatch:!0,pending:Ie,then:Ae,catch:De,value:9,blocks:[,,,]};return N(l=n[2],t),{c(){e=M(),t.block.c()},l(o){e=M(),t.block.l(o)},m(o,r){I(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(o,r){n=o,t.ctx=n,r&4&&l!==(l=n[2])&&N(l,t)||re(t,n,r)},i(o){a||(L(t.block),a=!0)},o(o){for(let r=0;r<3;r+=1){const s=t.blocks[r];P(s)}a=!1},d(o){o&&m(e),t.block.d(o),t.token=null,t=null}}}function De(n){let e,l;return{c(){e=y("div"),l=V("Failure")},l(a){e=D(a,"DIV",{});var t=A(e);l=S(t,"Failure"),t.forEach(m)},m(a,t){I(a,e,t),b(e,l)},p:T,i:T,o:T,d(a){a&&m(e)}}}function Ae(n){let e,l,a=n[9].items,t=[];for(let r=0;r<a.length;r+=1)t[r]=he(fe(n,a,r));const o=r=>P(t[r],1,1,()=>{t[r]=null});return{c(){e=y("ul");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=D(r,"UL",{});var s=A(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(m)},m(r,s){I(r,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(r,s){if(s&4){a=r[9].items;let i;for(i=0;i<a.length;i+=1){const _=fe(r,a,i);t[i]?(t[i].p(_,s),L(t[i],1)):(t[i]=he(_),t[i].c(),L(t[i],1),t[i].m(e,null))}for(q(),i=a.length;i<t.length;i+=1)o(i);O()}},i(r){if(!l){for(let s=0;s<a.length;s+=1)L(t[s]);l=!0}},o(r){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)P(t[s]);l=!1},d(r){r&&m(e),Q(t,r)}}}function he(n){let e,l,a=n[10].name+"",t,o,r,s,i=n[10].artists[0].name+"",_,f,c,h,p;return{c(){e=y("li"),l=y("a"),t=V(a),r=V(`
								by
								`),s=y("a"),_=V(i),c=H(),this.h()},l(v){e=D(v,"LI",{class:!0});var g=A(e);l=D(g,"A",{href:!0});var B=A(l);t=S(B,a),B.forEach(m),r=S(g,`
								by
								`),s=D(g,"A",{href:!0});var k=A(s);_=S(k,i),k.forEach(m),c=U(g),g.forEach(m),this.h()},h(){d(l,"href",o=n[10].external_urls.spotify),d(s,"href",f=n[10].artists[0].external_urls.spotify),d(e,"class","svelte-go1yxl")},m(v,g){I(v,e,g),b(e,l),b(l,t),b(e,r),b(e,s),b(s,_),b(e,c),p=!0},p(v,g){(!p||g&4)&&a!==(a=v[10].name+"")&&F(t,a),(!p||g&4&&o!==(o=v[10].external_urls.spotify))&&d(l,"href",o),(!p||g&4)&&i!==(i=v[10].artists[0].name+"")&&F(_,i),(!p||g&4&&f!==(f=v[10].artists[0].external_urls.spotify))&&d(s,"href",f)},i(v){p||(ae(()=>{h||(h=R(e,z,{delay:0,duration:500},!0)),h.run(1)}),p=!0)},o(v){h||(h=R(e,z,{delay:0,duration:500},!1)),h.run(0),p=!1},d(v){v&&m(e),v&&h&&h.end()}}}function Ie(n){let e,l;return{c(){e=y("div"),l=V("Loading...")},l(a){e=D(a,"DIV",{});var t=A(e);l=S(t,"Loading..."),t.forEach(m)},m(a,t){I(a,e,t),b(e,l)},p:T,i:T,o:T,d(a){a&&m(e)}}}function _e(n){let e,l,a,t={ctx:n,current:null,token:null,hasCatch:!0,pending:Pe,then:Te,catch:Le,value:5,blocks:[,,,]};return N(l=n[1],t),{c(){e=M(),t.block.c()},l(o){e=M(),t.block.l(o)},m(o,r){I(o,e,r),t.block.m(o,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(o,r){n=o,t.ctx=n,r&2&&l!==(l=n[1])&&N(l,t)||re(t,n,r)},i(o){a||(L(t.block),a=!0)},o(o){for(let r=0;r<3;r+=1){const s=t.blocks[r];P(s)}a=!1},d(o){o&&m(e),t.block.d(o),t.token=null,t=null}}}function Le(n){let e,l;return{c(){e=y("div"),l=V("Failure")},l(a){e=D(a,"DIV",{});var t=A(e);l=S(t,"Failure"),t.forEach(m)},m(a,t){I(a,e,t),b(e,l)},p:T,i:T,o:T,d(a){a&&m(e)}}}function Te(n){let e,l,a=n[5].items,t=[];for(let r=0;r<a.length;r+=1)t[r]=de(ue(n,a,r));const o=r=>P(t[r],1,1,()=>{t[r]=null});return{c(){e=y("ul");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=D(r,"UL",{});var s=A(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(m)},m(r,s){I(r,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(r,s){if(s&2){a=r[5].items;let i;for(i=0;i<a.length;i+=1){const _=ue(r,a,i);t[i]?(t[i].p(_,s),L(t[i],1)):(t[i]=de(_),t[i].c(),L(t[i],1),t[i].m(e,null))}for(q(),i=a.length;i<t.length;i+=1)o(i);O()}},i(r){if(!l){for(let s=0;s<a.length;s+=1)L(t[s]);l=!0}},o(r){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)P(t[s]);l=!1},d(r){r&&m(e),Q(t,r)}}}function de(n){let e,l,a=n[6].name+"",t,o,r,s,i;return{c(){e=y("li"),l=y("a"),t=V(a),r=H(),this.h()},l(_){e=D(_,"LI",{class:!0});var f=A(e);l=D(f,"A",{href:!0});var c=A(l);t=S(c,a),c.forEach(m),r=U(f),f.forEach(m),this.h()},h(){d(l,"href",o=n[6].external_urls.spotify),d(e,"class","svelte-go1yxl")},m(_,f){I(_,e,f),b(e,l),b(l,t),b(e,r),i=!0},p(_,f){n=_,(!i||f&2)&&a!==(a=n[6].name+"")&&F(t,a),(!i||f&2&&o!==(o=n[6].external_urls.spotify))&&d(l,"href",o)},i(_){i||(ae(()=>{s||(s=R(e,z,{delay:0,duration:500,easing:ne},!0)),s.run(1)}),i=!0)},o(_){s||(s=R(e,z,{delay:0,duration:500,easing:ne},!1)),s.run(0),i=!1},d(_){_&&m(e),_&&s&&s.end()}}}function Pe(n){let e,l;return{c(){e=y("div"),l=V("Loading...")},l(a){e=D(a,"DIV",{});var t=A(e);l=S(t,"Loading..."),t.forEach(m)},m(a,t){I(a,e,t),b(e,l)},p:T,i:T,o:T,d(a){a&&m(e)}}}function Ve(n){let e,l,a,t,o,r,s,i,_;a=new ie({props:{name:"Top Tracks",id:"top-tracks",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),a.$on("change",n[3]);let f=n[2]instanceof Promise&&ce(n);s=new ie({props:{name:"Top Artists",id:"top-artists",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),s.$on("change",n[4]);let c=n[1]instanceof Promise&&_e(n);return{c(){e=y("div"),l=y("div"),W(a.$$.fragment),t=H(),f&&f.c(),o=H(),r=y("div"),W(s.$$.fragment),i=H(),c&&c.c(),this.h()},l(h){e=D(h,"DIV",{id:!0,class:!0});var p=A(e);l=D(p,"DIV",{});var v=A(l);X(a.$$.fragment,v),t=U(v),f&&f.l(v),v.forEach(m),o=U(p),r=D(p,"DIV",{});var g=A(r);X(s.$$.fragment,g),i=U(g),c&&c.l(g),g.forEach(m),p.forEach(m),this.h()},h(){d(e,"id","top"),d(e,"class","cols")},m(h,p){I(h,e,p),b(e,l),Y(a,l,null),b(l,t),f&&f.m(l,null),b(e,o),b(e,r),Y(s,r,null),b(r,i),c&&c.m(r,null),_=!0},p(h,p){h[2]instanceof Promise?f?(f.p(h,p),p&4&&L(f,1)):(f=ce(h),f.c(),L(f,1),f.m(l,null)):f&&(q(),P(f,1,1,()=>{f=null}),O()),h[1]instanceof Promise?c?(c.p(h,p),p&2&&L(c,1)):(c=_e(h),c.c(),L(c,1),c.m(r,null)):c&&(q(),P(c,1,1,()=>{c=null}),O())},i(h){_||(L(a.$$.fragment,h),L(f),L(s.$$.fragment,h),L(c),_=!0)},o(h){P(a.$$.fragment,h),P(f),P(s.$$.fragment,h),P(c),_=!1},d(h){h&&m(e),Z(a),f&&f.d(),Z(s),c&&c.d()}}}function Se(n){let e,l,a,t;return a=new ge({props:{title:"Generator",$$slots:{default:[Ve]},$$scope:{ctx:n}}}),{c(){e=H(),l=H(),W(a.$$.fragment),this.h()},l(o){be('[data-svelte="svelte-ny9739"]',document.head).forEach(m),e=U(o),l=U(o),X(a.$$.fragment,o),this.h()},h(){document.title="Generation"},m(o,r){I(o,e,r),I(o,l,r),Y(a,o,r),t=!0},p(o,[r]){const s={};r&8199&&(s.$$scope={dirty:r,ctx:o}),a.$set(s)},i(o){t||(L(a.$$.fragment,o),t=!0)},o(o){P(a.$$.fragment,o),t=!1},d(o){o&&m(e),o&&m(l),Z(a,o)}}}function Be(n,e,l){let a,t,o;ve(()=>{const i=new URLSearchParams(window.location.search);l(0,o=new we(i.get("token"))),l(2,t=o.topTracks({time_range:"long_term"})),l(1,a=o.topArtists({time_range:"long_term"}))});const r=i=>{l(2,t=o.topTracks({time_range:i.detail.value}))},s=i=>{l(1,a=o.topArtists({time_range:i.detail.value}))};return l(1,a=void 0),l(2,t=void 0),[o,a,t,r,s]}class je extends ${constructor(e){super();x(this,e,Be,Se,ee,{})}}export{je as default};
