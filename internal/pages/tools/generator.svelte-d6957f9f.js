var ye=Object.defineProperty;var re=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var ne=(n,e,t)=>e in n?ye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,z=(n,e)=>{for(var t in e||(e={}))we.call(e,t)&&ne(n,t,e[t]);if(re)for(var t of re(e))$e.call(e,t)&&ne(n,t,e[t]);return n};import{S as X,i as Q,s as Z,e as k,t as S,k as j,c as b,a as y,g as L,n as P,d,b as h,R as M,f as T,G as v,H as q,h as G,a0 as ae,a1 as se,N as O,O as x,T as Ee,a2 as Te,j as C,m as H,o as F,x as E,u as D,v as U,F as De,A as Ae,l as V,r as J,w as K,X as R,Y as oe,M as ee,D as Ie,a3 as ie,a4 as ce,W as ue}from"../../chunks/vendor-4914c756.js";import{a as fe}from"../../chunks/paths-6758d194.js";import{S as Se,r as Le}from"../../chunks/spotifyButton-ca66dc93.js";import{P as Oe}from"../../chunks/page-c34c918a.js";import{a as je,O as Pe}from"../../chunks/overlayLoading-7a4a8709.js";import"../../chunks/singletons-12a22614.js";const Ne=n=>n?`?${Object.entries(n).map(e=>e[0]&&e[1]?`${e[0]}=${Array.isArray(e[1])?e[1].join(","):e[1]}`:"").join("&")}`:"",Ve="https://api.spotify.com/v1",Be=n=>{const e=new Headers({Authorization:`Bearer ${n.access_token}`}),t=async s=>{var i;return(await fetch(`${Ve}${s.route}${Ne(s.options)}`,{method:`${(i=s==null?void 0:s.method)!=null?i:"GET"}`,headers:e})).json()},l={me:async()=>t({route:"/me"}),topTracks:async s=>t({route:"/me/top/tracks",options:s}),topArtists:async s=>t({route:"/me/top/artists",options:s}),user:async s=>t({route:`/users/${s}`}),followedArtists:async s=>t({route:"/me/following",options:z({type:"artist"},s)}),followedArtistsCheck:async s=>t({route:"/me/following/contains",options:s}),followsPlaylistCheck:async(s,a)=>t({route:`/playlists/${s}/followers/contains`,options:a})},r={track:async s=>t({route:`/track/${s}`}),tracks:async s=>t({route:"/tracks",options:s}),savedTracks:async s=>t({route:"/me/tracks",options:s})};return z(z({},l),r)};function _e(n,e,t){const l=n.slice();return l[15]=e[t],l[17]=t,l}function he(n){let e,t=n[15].label+"",l,r,s,a,i,o;function u(){return n[10](n[17])}return{c(){e=k("div"),l=S(t),r=j(),this.h()},l(c){e=b(c,"DIV",{value:!0,"aria-selected":!0,role:!0,class:!0,id:!0});var f=y(e);l=L(f,t),r=P(f),f.forEach(d),this.h()},h(){h(e,"value",s=n[15].value),h(e,"aria-selected","true"),h(e,"role","option"),h(e,"class","ds-option svelte-o3bmey"),h(e,"id",a=""+(n[1]+"-option-"+n[17])),M(e,"option-current",n[7]===n[17])},m(c,f){T(c,e,f),v(e,l),v(e,r),i||(o=q(e,"click",u),i=!0)},p(c,f){n=c,f&8&&t!==(t=n[15].label+"")&&G(l,t),f&8&&s!==(s=n[15].value)&&h(e,"value",s),f&2&&a!==(a=""+(n[1]+"-option-"+n[17]))&&h(e,"id",a),f&128&&M(e,"option-current",n[7]===n[17])},d(c){c&&d(e),i=!1,o()}}}function Ce(n){let e,t,l,r,s,a,i,o,u=(n[4]!==-1?n[3][n[4]].label:n[2])+"",c,f,p,_,A,I,Y,N=n[3],m=[];for(let g=0;g<N.length;g+=1)m[g]=he(_e(n,N,g));return{c(){e=k("div"),t=k("label"),l=S(n[0]),r=S(" -"),a=j(),i=k("div"),o=k("span"),c=S(u),p=j(),_=k("div");for(let g=0;g<m.length;g+=1)m[g].c();this.h()},l(g){e=b(g,"DIV",{});var $=y(e);t=b($,"LABEL",{for:!0,id:!0,class:!0});var w=y(t);l=L(w,n[0]),r=L(w," -"),w.forEach(d),a=P($),i=b($,"DIV",{class:!0,id:!0});var B=y(i);o=b(B,"SPAN",{"aria-controls":!0,"aria-haspopup":!0,role:!0,tabindex:!0,class:!0,"aria-activedescendant":!0});var te=y(o);c=L(te,u),te.forEach(d),p=P(B),_=b(B,"DIV",{role:!0,tabindex:!0,class:!0,id:!0,"aria-expanded":!0});var le=y(_);for(let W=0;W<m.length;W+=1)m[W].l(le);le.forEach(d),B.forEach(d),$.forEach(d),this.h()},h(){h(t,"for",n[1]),h(t,"id",s=""+(n[1]+"-label")),h(t,"class","ds-label svelte-o3bmey"),h(o,"aria-controls","listbox"),h(o,"aria-haspopup","listbox"),h(o,"role","combobox"),h(o,"tabindex","0"),h(o,"class","ds-input svelte-o3bmey"),h(o,"aria-activedescendant",f=""+(n[1]+"-option-"+(n[7]>=0?n[7]:n[4]))),h(_,"role","listbox"),h(_,"tabindex","-1"),h(_,"class","ds-menu svelte-o3bmey"),h(_,"id",A=""+(n[1]+"-menu")),h(_,"aria-expanded",n[6]),M(_,"open",n[6]),h(i,"class","ds-main ds-select svelte-o3bmey"),h(i,"id",n[1]),M(i,"open",n[6])},m(g,$){T(g,e,$),v(e,t),v(t,l),v(t,r),v(e,a),v(e,i),v(i,o),v(o,c),v(i,p),v(i,_);for(let w=0;w<m.length;w+=1)m[w].m(_,null);I||(Y=[q(_,"mousedown",n[11]),q(_,"mouseup",n[12]),q(i,"click",ae(se(n[13]))),q(i,"blur",ae(se(n[8])),!0),q(i,"keydown",n[9])],I=!0)},p(g,[$]){if($&1&&G(l,g[0]),$&2&&h(t,"for",g[1]),$&2&&s!==(s=""+(g[1]+"-label"))&&h(t,"id",s),$&28&&u!==(u=(g[4]!==-1?g[3][g[4]].label:g[2])+"")&&G(c,u),$&146&&f!==(f=""+(g[1]+"-option-"+(g[7]>=0?g[7]:g[4])))&&h(o,"aria-activedescendant",f),$&154){N=g[3];let w;for(w=0;w<N.length;w+=1){const B=_e(g,N,w);m[w]?m[w].p(B,$):(m[w]=he(B),m[w].c(),m[w].m(_,null))}for(;w<m.length;w+=1)m[w].d(1);m.length=N.length}$&2&&A!==(A=""+(g[1]+"-menu"))&&h(_,"id",A),$&64&&h(_,"aria-expanded",g[6]),$&64&&M(_,"open",g[6]),$&2&&h(i,"id",g[1]),$&64&&M(i,"open",g[6])},i:O,o:O,d(g){g&&d(e),x(m,g),I=!1,Ee(Y)}}}function He(n,e,t){const l=Te();let{name:r="select"}=e,{id:s="example"}=e,{placeHolder:a=void 0}=e,{options:i}=e,o=!1,u=a?typeof a=="string"?-1:a:0,c=!1,f=-1;const p=()=>{if(o){t(5,o=!1);return}c&&!o&&t(6,c=!1)},_=m=>{if(c)switch(m.key){case" ":case"Enter":m.preventDefault(),t(4,u=f),t(6,c=!1);break;case"ArrowUp":{m.preventDefault(),f-1>=0&&t(7,f-=1);break}case"Tab":if(m.shiftKey){m.preventDefault(),f-1>=0&&t(7,f-=1);break}case"ArrowDown":{m.preventDefault(),f+1<i.length&&t(7,f+=1);break}case"Escape":m.preventDefault(),t(6,c=!1);break}else switch(m.key){case"ArrowUp":case"ArrowDown":case" ":case"Enter":m.preventDefault(),t(6,c=!0),t(7,f=u);break}},A=m=>{u!==m&&t(4,u=m)},I=()=>{t(5,o=!0)},Y=()=>{t(5,o=!1)},N=()=>{t(7,f=-1),t(6,c=!c)};return n.$$set=m=>{"name"in m&&t(0,r=m.name),"id"in m&&t(1,s=m.id),"placeHolder"in m&&t(2,a=m.placeHolder),"options"in m&&t(3,i=m.options)},n.$$.update=()=>{n.$$.dirty&24&&u>=0&&u<i.length&&l("change",i[u])},[r,s,a,i,u,o,c,f,p,_,A,I,Y,N]}class de extends X{constructor(e){super();Q(this,e,He,Ce,Z,{name:0,id:1,placeHolder:2,options:3})}}function Fe(n){let e,t,l,r,s,a;return s=new Se({props:{url:n[0]}}),{c(){e=k("div"),t=k("p"),l=S("You need to connect spotify to access this feature"),r=j(),C(s.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0});var o=y(e);t=b(o,"P",{});var u=y(t);l=L(u,"You need to connect spotify to access this feature"),u.forEach(d),r=P(o),H(s.$$.fragment,o),o.forEach(d),this.h()},h(){h(e,"class","box svelte-gy3zmx")},m(i,o){T(i,e,o),v(e,t),v(t,l),v(e,r),F(s,e,null),a=!0},p(i,o){const u={};o&1&&(u.url=i[0]),s.$set(u)},i(i){a||(E(s.$$.fragment,i),a=!0)},o(i){D(s.$$.fragment,i),a=!1},d(i){i&&d(e),U(s)}}}function Ue(n){let e,t;return e=new je({props:{$$slots:{default:[Fe]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,r){F(e,l,r),t=!0},p(l,[r]){const s={};r&3&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Me(n,e,t){let{url:l=`${fe}/generator`}=e;return n.$$set=r=>{"url"in r&&t(0,l=r.url)},[l]}class qe extends X{constructor(e){super();Q(this,e,Me,Ue,Z,{url:0})}}function me(n,e,t){const l=n.slice();return l[8]=e[t],l}function pe(n,e,t){const l=n.slice();return l[12]=e[t],l}function Ge(n){let e,t;return e=new Pe({}),{c(){C(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,r){F(e,l,r),t=!0},p:O,i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Ye(n){let e,t,l,r;const s=[Je,ze],a=[];function i(o,u){return o[1]?0:1}return e=i(n),t=a[e]=s[e](n),{c(){t.c(),l=V()},l(o){t.l(o),l=V()},m(o,u){a[e].m(o,u),T(o,l,u),r=!0},p(o,u){let c=e;e=i(o),e===c?a[e].p(o,u):(J(),D(a[c],1,1,()=>{a[c]=null}),K(),t=a[e],t?t.p(o,u):(t=a[e]=s[e](o),t.c()),E(t,1),t.m(l.parentNode,l))},i(o){r||(E(t),r=!0)},o(o){D(t),r=!1},d(o){a[e].d(o),o&&d(l)}}}function ze(n){let e,t;return e=new qe({props:{url:`${fe}/generator`}}),{c(){C(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,r){F(e,l,r),t=!0},p:O,i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Je(n){let e,t,l,r,s,a,i,o,u;l=new de({props:{name:"Top Tracks",id:"top-tracks",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),l.$on("change",n[4]);let c=n[3]instanceof Promise&&ge(n);i=new de({props:{name:"Top Artists",id:"top-artists",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),i.$on("change",n[5]);let f=n[2]instanceof Promise&&ke(n);return{c(){e=k("div"),t=k("section"),C(l.$$.fragment),r=j(),c&&c.c(),s=j(),a=k("section"),C(i.$$.fragment),o=j(),f&&f.c(),this.h()},l(p){e=b(p,"DIV",{class:!0,style:!0});var _=y(e);t=b(_,"SECTION",{class:!0,style:!0});var A=y(t);H(l.$$.fragment,A),r=P(A),c&&c.l(A),A.forEach(d),s=P(_),a=b(_,"SECTION",{class:!0,style:!0});var I=y(a);H(i.$$.fragment,I),o=P(I),f&&f.l(I),I.forEach(d),_.forEach(d),this.h()},h(){h(t,"class","stack"),ee(t,"align-items","flex-start"),h(a,"class","stack "),ee(a,"align-items","flex-start"),h(e,"class","box flexy svelte-mcwutr"),ee(e,"--gap","2ch")},m(p,_){T(p,e,_),v(e,t),F(l,t,null),v(t,r),c&&c.m(t,null),v(e,s),v(e,a),F(i,a,null),v(a,o),f&&f.m(a,null),u=!0},p(p,_){p[3]instanceof Promise?c?c.p(p,_):(c=ge(p),c.c(),c.m(t,null)):c&&(c.d(1),c=null),p[2]instanceof Promise?f?(f.p(p,_),_&4&&E(f,1)):(f=ke(p),f.c(),E(f,1),f.m(a,null)):f&&(J(),D(f,1,1,()=>{f=null}),K())},i(p){u||(E(l.$$.fragment,p),E(i.$$.fragment,p),E(f),u=!0)},o(p){D(l.$$.fragment,p),D(i.$$.fragment,p),D(f),u=!1},d(p){p&&d(e),U(l),c&&c.d(),U(i),f&&f.d()}}}function ge(n){let e,t,l={ctx:n,current:null,token:null,hasCatch:!0,pending:We,then:Re,catch:Ke,value:11};return R(t=n[3],l),{c(){e=V(),l.block.c()},l(r){e=V(),l.block.l(r)},m(r,s){T(r,e,s),l.block.m(r,l.anchor=s),l.mount=()=>e.parentNode,l.anchor=e},p(r,s){n=r,l.ctx=n,s&8&&t!==(t=n[3])&&R(t,l)||oe(l,n,s)},d(r){r&&d(e),l.block.d(r),l.token=null,l=null}}}function Ke(n){let e,t;return{c(){e=k("div"),t=S("Failure")},l(l){e=b(l,"DIV",{});var r=y(e);t=L(r,"Failure"),r.forEach(d)},m(l,r){T(l,e,r),v(e,t)},p:O,d(l){l&&d(e)}}}function Re(n){let e,t=n[11].items,l=[];for(let r=0;r<t.length;r+=1)l[r]=ve(pe(n,t,r));return{c(){e=k("ul");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=b(r,"UL",{class:!0});var s=y(e);for(let a=0;a<l.length;a+=1)l[a].l(s);s.forEach(d),this.h()},h(){h(e,"class","unlist svelte-mcwutr")},m(r,s){T(r,e,s);for(let a=0;a<l.length;a+=1)l[a].m(e,null)},p(r,s){if(s&8){t=r[11].items;let a;for(a=0;a<t.length;a+=1){const i=pe(r,t,a);l[a]?l[a].p(i,s):(l[a]=ve(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(r){r&&d(e),x(l,r)}}}function ve(n){let e,t,l=n[12].name+"",r,s,a,i,o=n[12].artists[0].name+"",u,c,f;return{c(){e=k("li"),t=k("a"),r=S(l),a=S(`
										by
										`),i=k("a"),u=S(o),f=j(),this.h()},l(p){e=b(p,"LI",{class:!0});var _=y(e);t=b(_,"A",{href:!0});var A=y(t);r=L(A,l),A.forEach(d),a=L(_,`
										by
										`),i=b(_,"A",{href:!0});var I=y(i);u=L(I,o),I.forEach(d),f=P(_),_.forEach(d),this.h()},h(){h(t,"href",s=n[12].external_urls.spotify),h(i,"href",c=n[12].artists[0].external_urls.spotify),h(e,"class","svelte-mcwutr")},m(p,_){T(p,e,_),v(e,t),v(t,r),v(e,a),v(e,i),v(i,u),v(e,f)},p(p,_){_&8&&l!==(l=p[12].name+"")&&G(r,l),_&8&&s!==(s=p[12].external_urls.spotify)&&h(t,"href",s),_&8&&o!==(o=p[12].artists[0].name+"")&&G(u,o),_&8&&c!==(c=p[12].artists[0].external_urls.spotify)&&h(i,"href",c)},d(p){p&&d(e)}}}function We(n){let e,t;return{c(){e=k("div"),t=S("Loading...")},l(l){e=b(l,"DIV",{});var r=y(e);t=L(r,"Loading..."),r.forEach(d)},m(l,r){T(l,e,r),v(e,t)},p:O,d(l){l&&d(e)}}}function ke(n){let e,t,l,r={ctx:n,current:null,token:null,hasCatch:!0,pending:Ze,then:Qe,catch:Xe,value:7,blocks:[,,,]};return R(t=n[2],r),{c(){e=V(),r.block.c()},l(s){e=V(),r.block.l(s)},m(s,a){T(s,e,a),r.block.m(s,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,l=!0},p(s,a){n=s,r.ctx=n,a&4&&t!==(t=n[2])&&R(t,r)||oe(r,n,a)},i(s){l||(E(r.block),l=!0)},o(s){for(let a=0;a<3;a+=1){const i=r.blocks[a];D(i)}l=!1},d(s){s&&d(e),r.block.d(s),r.token=null,r=null}}}function Xe(n){let e,t;return{c(){e=k("div"),t=S("Failure")},l(l){e=b(l,"DIV",{});var r=y(e);t=L(r,"Failure"),r.forEach(d)},m(l,r){T(l,e,r),v(e,t)},p:O,i:O,o:O,d(l){l&&d(e)}}}function Qe(n){let e,t,l=n[7].items,r=[];for(let a=0;a<l.length;a+=1)r[a]=be(me(n,l,a));const s=a=>D(r[a],1,1,()=>{r[a]=null});return{c(){e=k("ul");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=b(a,"UL",{class:!0});var i=y(e);for(let o=0;o<r.length;o+=1)r[o].l(i);i.forEach(d),this.h()},h(){h(e,"class","unlist svelte-mcwutr")},m(a,i){T(a,e,i);for(let o=0;o<r.length;o+=1)r[o].m(e,null);t=!0},p(a,i){if(i&4){l=a[7].items;let o;for(o=0;o<l.length;o+=1){const u=me(a,l,o);r[o]?(r[o].p(u,i),E(r[o],1)):(r[o]=be(u),r[o].c(),E(r[o],1),r[o].m(e,null))}for(J(),o=l.length;o<r.length;o+=1)s(o);K()}},i(a){if(!t){for(let i=0;i<l.length;i+=1)E(r[i]);t=!0}},o(a){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)D(r[i]);t=!1},d(a){a&&d(e),x(r,a)}}}function be(n){let e,t,l=n[8].name+"",r,s,a,i,o;return{c(){e=k("li"),t=k("a"),r=S(l),a=j(),this.h()},l(u){e=b(u,"LI",{class:!0});var c=y(e);t=b(c,"A",{href:!0});var f=y(t);r=L(f,l),f.forEach(d),a=P(c),c.forEach(d),this.h()},h(){h(t,"href",s=n[8].external_urls.spotify),h(e,"class","svelte-mcwutr")},m(u,c){T(u,e,c),v(e,t),v(t,r),v(e,a),o=!0},p(u,c){n=u,(!o||c&4)&&l!==(l=n[8].name+"")&&G(r,l),(!o||c&4&&s!==(s=n[8].external_urls.spotify))&&h(t,"href",s)},i(u){o||(Ie(()=>{i||(i=ie(e,ue,{delay:0,duration:500,easing:ce},!0)),i.run(1)}),o=!0)},o(u){i||(i=ie(e,ue,{delay:0,duration:500,easing:ce},!1)),i.run(0),o=!1},d(u){u&&d(e),u&&i&&i.end()}}}function Ze(n){let e,t;return{c(){e=k("div"),t=S("Loading...")},l(l){e=b(l,"DIV",{});var r=y(e);t=L(r,"Loading..."),r.forEach(d)},m(l,r){T(l,e,r),v(e,t)},p:O,i:O,o:O,d(l){l&&d(e)}}}function xe(n){let e,t,l,r;const s=[Ye,Ge],a=[];function i(o,u){return o[0]?0:1}return e=i(n),t=a[e]=s[e](n),{c(){t.c(),l=V()},l(o){t.l(o),l=V()},m(o,u){a[e].m(o,u),T(o,l,u),r=!0},p(o,u){let c=e;e=i(o),e===c?a[e].p(o,u):(J(),D(a[c],1,1,()=>{a[c]=null}),K(),t=a[e],t?t.p(o,u):(t=a[e]=s[e](o),t.c()),E(t,1),t.m(l.parentNode,l))},i(o){r||(E(t),r=!0)},o(o){D(t),r=!1},d(o){a[e].d(o),o&&d(l)}}}function et(n){let e,t,l;return t=new Oe({props:{title:"Top Spotify Info",$$slots:{default:[xe]},$$scope:{ctx:n}}}),{c(){e=j(),C(t.$$.fragment),this.h()},l(r){De('[data-svelte="svelte-1998kk8"]',document.head).forEach(d),e=P(r),H(t.$$.fragment,r),this.h()},h(){document.title="Top Spotify info"},m(r,s){T(r,e,s),F(t,r,s),l=!0},p(r,[s]){const a={};s&32783&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){l||(E(t.$$.fragment,r),l=!0)},o(r){D(t.$$.fragment,r),l=!1},d(r){r&&d(e),U(t,r)}}}function tt(n,e,t){let l=!1,r,s,a;Ae(()=>{const c=sessionStorage.getItem("token_set");c&&(JSON.parse(c),Le().then(()=>{i(JSON.parse(sessionStorage.getItem("token_set")))})),window.setTimeout(()=>{t(0,l=!0)},100)});const i=c=>{t(1,r=Be(c)),t(3,a=r.topTracks({time_range:"long_term"})),t(2,s=r.topArtists({time_range:"long_term"}))};return[l,r,s,a,c=>{t(3,a=r.topTracks({time_range:c.detail.value}))},c=>{t(2,s=r.topArtists({time_range:c.detail.value}))}]}class ct extends X{constructor(e){super();Q(this,e,tt,et,Z,{})}}export{ct as default};
