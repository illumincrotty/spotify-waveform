var ke=Object.defineProperty;var re=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var ne=(n,e,t)=>e in n?ke(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,z=(n,e)=>{for(var t in e||(e={}))ye.call(e,t)&&ne(n,t,e[t]);if(re)for(var t of re(e))we.call(e,t)&&ne(n,t,e[t]);return n};import{S as X,i as Q,s as Z,e as b,t as S,k as j,c as k,a as y,g as L,n as P,d,b as _,R as M,f as T,G as v,H as q,h as G,a0 as ae,a1 as oe,N as O,O as x,T as Ee,a2 as $e,j as C,m as H,o as F,x as $,u as D,v as U,F as Te,A as De,l as V,r as J,w as K,X as R,Y as se,M as ee,D as Ae,a3 as ie,a4 as ce,W as ue}from"../../chunks/vendor-4914c756.js";import{S as Ie,r as Se}from"../../chunks/spotifyButton-c139b640.js";import{P as Le}from"../../chunks/page-c34c918a.js";import{a as Oe,O as je}from"../../chunks/overlayLoading-7a4a8709.js";import"../../chunks/paths-28a87002.js";import"../../chunks/singletons-12a22614.js";const Pe=n=>n?`?${Object.entries(n).map(e=>e[0]&&e[1]?`${e[0]}=${Array.isArray(e[1])?e[1].join(","):e[1]}`:"").join("&")}`:"",Ne="https://api.spotify.com/v1",Ve=n=>{const e=new Headers({Authorization:`Bearer ${n.access_token}`}),t=async o=>{var i;return(await fetch(`${Ne}${o.route}${Pe(o.options)}`,{method:`${(i=o==null?void 0:o.method)!=null?i:"GET"}`,headers:e})).json()},l={me:async()=>t({route:"/me"}),topTracks:async o=>t({route:"/me/top/tracks",options:o}),topArtists:async o=>t({route:"/me/top/artists",options:o}),user:async o=>t({route:`/users/${o}`}),followedArtists:async o=>t({route:"/me/following",options:z({type:"artist"},o)}),followedArtistsCheck:async o=>t({route:"/me/following/contains",options:o}),followsPlaylistCheck:async(o,a)=>t({route:`/playlists/${o}/followers/contains`,options:a})},r={track:async o=>t({route:`/track/${o}`}),tracks:async o=>t({route:"/tracks",options:o}),savedTracks:async o=>t({route:"/me/tracks",options:o})};return z(z({},l),r)};function fe(n,e,t){const l=n.slice();return l[15]=e[t],l[17]=t,l}function _e(n){let e,t=n[15].label+"",l,r,o,a,i,s;function u(){return n[10](n[17])}return{c(){e=b("div"),l=S(t),r=j(),this.h()},l(c){e=k(c,"DIV",{value:!0,"aria-selected":!0,role:!0,class:!0,id:!0});var f=y(e);l=L(f,t),r=P(f),f.forEach(d),this.h()},h(){_(e,"value",o=n[15].value),_(e,"aria-selected","true"),_(e,"role","option"),_(e,"class","ds-option svelte-o3bmey"),_(e,"id",a=""+(n[1]+"-option-"+n[17])),M(e,"option-current",n[7]===n[17])},m(c,f){T(c,e,f),v(e,l),v(e,r),i||(s=q(e,"click",u),i=!0)},p(c,f){n=c,f&8&&t!==(t=n[15].label+"")&&G(l,t),f&8&&o!==(o=n[15].value)&&_(e,"value",o),f&2&&a!==(a=""+(n[1]+"-option-"+n[17]))&&_(e,"id",a),f&128&&M(e,"option-current",n[7]===n[17])},d(c){c&&d(e),i=!1,s()}}}function Be(n){let e,t,l,r,o,a,i,s,u=(n[4]!==-1?n[3][n[4]].label:n[2])+"",c,f,p,h,A,I,Y,N=n[3],m=[];for(let g=0;g<N.length;g+=1)m[g]=_e(fe(n,N,g));return{c(){e=b("div"),t=b("label"),l=S(n[0]),r=S(" -"),a=j(),i=b("div"),s=b("span"),c=S(u),p=j(),h=b("div");for(let g=0;g<m.length;g+=1)m[g].c();this.h()},l(g){e=k(g,"DIV",{});var E=y(e);t=k(E,"LABEL",{for:!0,id:!0,class:!0});var w=y(t);l=L(w,n[0]),r=L(w," -"),w.forEach(d),a=P(E),i=k(E,"DIV",{class:!0,id:!0});var B=y(i);s=k(B,"SPAN",{"aria-controls":!0,"aria-haspopup":!0,role:!0,tabindex:!0,class:!0,"aria-activedescendant":!0});var te=y(s);c=L(te,u),te.forEach(d),p=P(B),h=k(B,"DIV",{role:!0,tabindex:!0,class:!0,id:!0,"aria-expanded":!0});var le=y(h);for(let W=0;W<m.length;W+=1)m[W].l(le);le.forEach(d),B.forEach(d),E.forEach(d),this.h()},h(){_(t,"for",n[1]),_(t,"id",o=""+(n[1]+"-label")),_(t,"class","ds-label svelte-o3bmey"),_(s,"aria-controls","listbox"),_(s,"aria-haspopup","listbox"),_(s,"role","combobox"),_(s,"tabindex","0"),_(s,"class","ds-input svelte-o3bmey"),_(s,"aria-activedescendant",f=""+(n[1]+"-option-"+(n[7]>=0?n[7]:n[4]))),_(h,"role","listbox"),_(h,"tabindex","-1"),_(h,"class","ds-menu svelte-o3bmey"),_(h,"id",A=""+(n[1]+"-menu")),_(h,"aria-expanded",n[6]),M(h,"open",n[6]),_(i,"class","ds-main ds-select svelte-o3bmey"),_(i,"id",n[1]),M(i,"open",n[6])},m(g,E){T(g,e,E),v(e,t),v(t,l),v(t,r),v(e,a),v(e,i),v(i,s),v(s,c),v(i,p),v(i,h);for(let w=0;w<m.length;w+=1)m[w].m(h,null);I||(Y=[q(h,"mousedown",n[11]),q(h,"mouseup",n[12]),q(i,"click",ae(oe(n[13]))),q(i,"blur",ae(oe(n[8])),!0),q(i,"keydown",n[9])],I=!0)},p(g,[E]){if(E&1&&G(l,g[0]),E&2&&_(t,"for",g[1]),E&2&&o!==(o=""+(g[1]+"-label"))&&_(t,"id",o),E&28&&u!==(u=(g[4]!==-1?g[3][g[4]].label:g[2])+"")&&G(c,u),E&146&&f!==(f=""+(g[1]+"-option-"+(g[7]>=0?g[7]:g[4])))&&_(s,"aria-activedescendant",f),E&154){N=g[3];let w;for(w=0;w<N.length;w+=1){const B=fe(g,N,w);m[w]?m[w].p(B,E):(m[w]=_e(B),m[w].c(),m[w].m(h,null))}for(;w<m.length;w+=1)m[w].d(1);m.length=N.length}E&2&&A!==(A=""+(g[1]+"-menu"))&&_(h,"id",A),E&64&&_(h,"aria-expanded",g[6]),E&64&&M(h,"open",g[6]),E&2&&_(i,"id",g[1]),E&64&&M(i,"open",g[6])},i:O,o:O,d(g){g&&d(e),x(m,g),I=!1,Ee(Y)}}}function Ce(n,e,t){const l=$e();let{name:r="select"}=e,{id:o="example"}=e,{placeHolder:a=void 0}=e,{options:i}=e,s=!1,u=a?typeof a=="string"?-1:a:0,c=!1,f=-1;const p=()=>{if(s){t(5,s=!1);return}c&&!s&&t(6,c=!1)},h=m=>{if(c)switch(m.key){case" ":case"Enter":m.preventDefault(),t(4,u=f),t(6,c=!1);break;case"ArrowUp":{m.preventDefault(),f-1>=0&&t(7,f-=1);break}case"Tab":if(m.shiftKey){m.preventDefault(),f-1>=0&&t(7,f-=1);break}case"ArrowDown":{m.preventDefault(),f+1<i.length&&t(7,f+=1);break}case"Escape":m.preventDefault(),t(6,c=!1);break}else switch(m.key){case"ArrowUp":case"ArrowDown":case" ":case"Enter":m.preventDefault(),t(6,c=!0),t(7,f=u);break}},A=m=>{u!==m&&t(4,u=m)},I=()=>{t(5,s=!0)},Y=()=>{t(5,s=!1)},N=()=>{t(7,f=-1),t(6,c=!c)};return n.$$set=m=>{"name"in m&&t(0,r=m.name),"id"in m&&t(1,o=m.id),"placeHolder"in m&&t(2,a=m.placeHolder),"options"in m&&t(3,i=m.options)},n.$$.update=()=>{n.$$.dirty&24&&u>=0&&u<i.length&&l("change",i[u])},[r,o,a,i,u,s,c,f,p,h,A,I,Y,N]}class he extends X{constructor(e){super();Q(this,e,Ce,Be,Z,{name:0,id:1,placeHolder:2,options:3})}}function He(n){let e,t,l,r,o,a;return o=new Ie({props:{url:n[0]}}),{c(){e=b("div"),t=b("p"),l=S("You need to connect spotify to access this feature"),r=j(),C(o.$$.fragment),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=y(e);t=k(s,"P",{});var u=y(t);l=L(u,"You need to connect spotify to access this feature"),u.forEach(d),r=P(s),H(o.$$.fragment,s),s.forEach(d),this.h()},h(){_(e,"class","box svelte-gy3zmx")},m(i,s){T(i,e,s),v(e,t),v(t,l),v(e,r),F(o,e,null),a=!0},p(i,s){const u={};s&1&&(u.url=i[0]),o.$set(u)},i(i){a||($(o.$$.fragment,i),a=!0)},o(i){D(o.$$.fragment,i),a=!1},d(i){i&&d(e),U(o)}}}function Fe(n){let e,t;return e=new Oe({props:{$$slots:{default:[He]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,r){F(e,l,r),t=!0},p(l,[r]){const o={};r&3&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Ue(n,e,t){let{url:l="tools/generator/"}=e;return n.$$set=r=>{"url"in r&&t(0,l=r.url)},[l]}class Me extends X{constructor(e){super();Q(this,e,Ue,Fe,Z,{url:0})}}function de(n,e,t){const l=n.slice();return l[8]=e[t],l}function me(n,e,t){const l=n.slice();return l[12]=e[t],l}function qe(n){let e,t;return e=new je({}),{c(){C(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,r){F(e,l,r),t=!0},p:O,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Ge(n){let e,t,l,r;const o=[ze,Ye],a=[];function i(s,u){return s[1]?0:1}return e=i(n),t=a[e]=o[e](n),{c(){t.c(),l=V()},l(s){t.l(s),l=V()},m(s,u){a[e].m(s,u),T(s,l,u),r=!0},p(s,u){let c=e;e=i(s),e===c?a[e].p(s,u):(J(),D(a[c],1,1,()=>{a[c]=null}),K(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),$(t,1),t.m(l.parentNode,l))},i(s){r||($(t),r=!0)},o(s){D(t),r=!1},d(s){a[e].d(s),s&&d(l)}}}function Ye(n){let e,t;return e=new Me({props:{url:"tools/generator/"}}),{c(){C(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,r){F(e,l,r),t=!0},p:O,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function ze(n){let e,t,l,r,o,a,i,s,u;l=new he({props:{name:"Top Tracks",id:"top-tracks",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),l.$on("change",n[4]);let c=n[3]instanceof Promise&&pe(n);i=new he({props:{name:"Top Artists",id:"top-artists",options:[{label:"Short Term",value:"short_term"},{label:"Medium Term",value:"medium_term"},{label:"Long Term",value:"long_term"}],placeHolder:2}}),i.$on("change",n[5]);let f=n[2]instanceof Promise&&ve(n);return{c(){e=b("div"),t=b("section"),C(l.$$.fragment),r=j(),c&&c.c(),o=j(),a=b("section"),C(i.$$.fragment),s=j(),f&&f.c(),this.h()},l(p){e=k(p,"DIV",{class:!0,style:!0});var h=y(e);t=k(h,"SECTION",{class:!0,style:!0});var A=y(t);H(l.$$.fragment,A),r=P(A),c&&c.l(A),A.forEach(d),o=P(h),a=k(h,"SECTION",{class:!0,style:!0});var I=y(a);H(i.$$.fragment,I),s=P(I),f&&f.l(I),I.forEach(d),h.forEach(d),this.h()},h(){_(t,"class","stack"),ee(t,"align-items","flex-start"),_(a,"class","stack "),ee(a,"align-items","flex-start"),_(e,"class","box flexy svelte-mcwutr"),ee(e,"--gap","2ch")},m(p,h){T(p,e,h),v(e,t),F(l,t,null),v(t,r),c&&c.m(t,null),v(e,o),v(e,a),F(i,a,null),v(a,s),f&&f.m(a,null),u=!0},p(p,h){p[3]instanceof Promise?c?c.p(p,h):(c=pe(p),c.c(),c.m(t,null)):c&&(c.d(1),c=null),p[2]instanceof Promise?f?(f.p(p,h),h&4&&$(f,1)):(f=ve(p),f.c(),$(f,1),f.m(a,null)):f&&(J(),D(f,1,1,()=>{f=null}),K())},i(p){u||($(l.$$.fragment,p),$(i.$$.fragment,p),$(f),u=!0)},o(p){D(l.$$.fragment,p),D(i.$$.fragment,p),D(f),u=!1},d(p){p&&d(e),U(l),c&&c.d(),U(i),f&&f.d()}}}function pe(n){let e,t,l={ctx:n,current:null,token:null,hasCatch:!0,pending:Re,then:Ke,catch:Je,value:11};return R(t=n[3],l),{c(){e=V(),l.block.c()},l(r){e=V(),l.block.l(r)},m(r,o){T(r,e,o),l.block.m(r,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(r,o){n=r,l.ctx=n,o&8&&t!==(t=n[3])&&R(t,l)||se(l,n,o)},d(r){r&&d(e),l.block.d(r),l.token=null,l=null}}}function Je(n){let e,t;return{c(){e=b("div"),t=S("Failure")},l(l){e=k(l,"DIV",{});var r=y(e);t=L(r,"Failure"),r.forEach(d)},m(l,r){T(l,e,r),v(e,t)},p:O,d(l){l&&d(e)}}}function Ke(n){let e,t=n[11].items,l=[];for(let r=0;r<t.length;r+=1)l[r]=ge(me(n,t,r));return{c(){e=b("ul");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=k(r,"UL",{class:!0});var o=y(e);for(let a=0;a<l.length;a+=1)l[a].l(o);o.forEach(d),this.h()},h(){_(e,"class","unlist svelte-mcwutr")},m(r,o){T(r,e,o);for(let a=0;a<l.length;a+=1)l[a].m(e,null)},p(r,o){if(o&8){t=r[11].items;let a;for(a=0;a<t.length;a+=1){const i=me(r,t,a);l[a]?l[a].p(i,o):(l[a]=ge(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(r){r&&d(e),x(l,r)}}}function ge(n){let e,t,l=n[12].name+"",r,o,a,i,s=n[12].artists[0].name+"",u,c,f;return{c(){e=b("li"),t=b("a"),r=S(l),a=S(`
										by
										`),i=b("a"),u=S(s),f=j(),this.h()},l(p){e=k(p,"LI",{class:!0});var h=y(e);t=k(h,"A",{rel:!0,href:!0});var A=y(t);r=L(A,l),A.forEach(d),a=L(h,`
										by
										`),i=k(h,"A",{rel:!0,href:!0});var I=y(i);u=L(I,s),I.forEach(d),f=P(h),h.forEach(d),this.h()},h(){_(t,"rel","external"),_(t,"href",o=n[12].external_urls.spotify),_(i,"rel","external"),_(i,"href",c=n[12].artists[0].external_urls.spotify),_(e,"class","svelte-mcwutr")},m(p,h){T(p,e,h),v(e,t),v(t,r),v(e,a),v(e,i),v(i,u),v(e,f)},p(p,h){h&8&&l!==(l=p[12].name+"")&&G(r,l),h&8&&o!==(o=p[12].external_urls.spotify)&&_(t,"href",o),h&8&&s!==(s=p[12].artists[0].name+"")&&G(u,s),h&8&&c!==(c=p[12].artists[0].external_urls.spotify)&&_(i,"href",c)},d(p){p&&d(e)}}}function Re(n){let e,t;return{c(){e=b("div"),t=S("Loading...")},l(l){e=k(l,"DIV",{});var r=y(e);t=L(r,"Loading..."),r.forEach(d)},m(l,r){T(l,e,r),v(e,t)},p:O,d(l){l&&d(e)}}}function ve(n){let e,t,l,r={ctx:n,current:null,token:null,hasCatch:!0,pending:Qe,then:Xe,catch:We,value:7,blocks:[,,,]};return R(t=n[2],r),{c(){e=V(),r.block.c()},l(o){e=V(),r.block.l(o)},m(o,a){T(o,e,a),r.block.m(o,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,l=!0},p(o,a){n=o,r.ctx=n,a&4&&t!==(t=n[2])&&R(t,r)||se(r,n,a)},i(o){l||($(r.block),l=!0)},o(o){for(let a=0;a<3;a+=1){const i=r.blocks[a];D(i)}l=!1},d(o){o&&d(e),r.block.d(o),r.token=null,r=null}}}function We(n){let e,t;return{c(){e=b("div"),t=S("Failure")},l(l){e=k(l,"DIV",{});var r=y(e);t=L(r,"Failure"),r.forEach(d)},m(l,r){T(l,e,r),v(e,t)},p:O,i:O,o:O,d(l){l&&d(e)}}}function Xe(n){let e,t,l=n[7].items,r=[];for(let a=0;a<l.length;a+=1)r[a]=be(de(n,l,a));const o=a=>D(r[a],1,1,()=>{r[a]=null});return{c(){e=b("ul");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=k(a,"UL",{class:!0});var i=y(e);for(let s=0;s<r.length;s+=1)r[s].l(i);i.forEach(d),this.h()},h(){_(e,"class","unlist svelte-mcwutr")},m(a,i){T(a,e,i);for(let s=0;s<r.length;s+=1)r[s].m(e,null);t=!0},p(a,i){if(i&4){l=a[7].items;let s;for(s=0;s<l.length;s+=1){const u=de(a,l,s);r[s]?(r[s].p(u,i),$(r[s],1)):(r[s]=be(u),r[s].c(),$(r[s],1),r[s].m(e,null))}for(J(),s=l.length;s<r.length;s+=1)o(s);K()}},i(a){if(!t){for(let i=0;i<l.length;i+=1)$(r[i]);t=!0}},o(a){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)D(r[i]);t=!1},d(a){a&&d(e),x(r,a)}}}function be(n){let e,t,l=n[8].name+"",r,o,a,i,s;return{c(){e=b("li"),t=b("a"),r=S(l),a=j(),this.h()},l(u){e=k(u,"LI",{class:!0});var c=y(e);t=k(c,"A",{rel:!0,href:!0});var f=y(t);r=L(f,l),f.forEach(d),a=P(c),c.forEach(d),this.h()},h(){_(t,"rel","external"),_(t,"href",o=n[8].external_urls.spotify),_(e,"class","svelte-mcwutr")},m(u,c){T(u,e,c),v(e,t),v(t,r),v(e,a),s=!0},p(u,c){n=u,(!s||c&4)&&l!==(l=n[8].name+"")&&G(r,l),(!s||c&4&&o!==(o=n[8].external_urls.spotify))&&_(t,"href",o)},i(u){s||(Ae(()=>{i||(i=ie(e,ue,{delay:0,duration:500,easing:ce},!0)),i.run(1)}),s=!0)},o(u){i||(i=ie(e,ue,{delay:0,duration:500,easing:ce},!1)),i.run(0),s=!1},d(u){u&&d(e),u&&i&&i.end()}}}function Qe(n){let e,t;return{c(){e=b("div"),t=S("Loading...")},l(l){e=k(l,"DIV",{});var r=y(e);t=L(r,"Loading..."),r.forEach(d)},m(l,r){T(l,e,r),v(e,t)},p:O,i:O,o:O,d(l){l&&d(e)}}}function Ze(n){let e,t,l,r;const o=[Ge,qe],a=[];function i(s,u){return s[0]?0:1}return e=i(n),t=a[e]=o[e](n),{c(){t.c(),l=V()},l(s){t.l(s),l=V()},m(s,u){a[e].m(s,u),T(s,l,u),r=!0},p(s,u){let c=e;e=i(s),e===c?a[e].p(s,u):(J(),D(a[c],1,1,()=>{a[c]=null}),K(),t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),$(t,1),t.m(l.parentNode,l))},i(s){r||($(t),r=!0)},o(s){D(t),r=!1},d(s){a[e].d(s),s&&d(l)}}}function xe(n){let e,t,l;return t=new Le({props:{title:"Top Spotify Info",$$slots:{default:[Ze]},$$scope:{ctx:n}}}),{c(){e=j(),C(t.$$.fragment),this.h()},l(r){Te('[data-svelte="svelte-1998kk8"]',document.head).forEach(d),e=P(r),H(t.$$.fragment,r),this.h()},h(){document.title="Top Spotify info"},m(r,o){T(r,e,o),F(t,r,o),l=!0},p(r,[o]){const a={};o&32783&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){l||($(t.$$.fragment,r),l=!0)},o(r){D(t.$$.fragment,r),l=!1},d(r){r&&d(e),U(t,r)}}}function et(n,e,t){let l=!1,r,o,a;De(()=>{const c=sessionStorage.getItem("token_set");c&&(JSON.parse(c),Se().then(()=>{i(JSON.parse(sessionStorage.getItem("token_set")))})),window.setTimeout(()=>{t(0,l=!0)},100)});const i=c=>{t(1,r=Ve(c)),t(3,a=r.topTracks({time_range:"long_term"})),t(2,o=r.topArtists({time_range:"long_term"}))};return[l,r,o,a,c=>{t(3,a=r.topTracks({time_range:c.detail.value}))},c=>{t(2,o=r.topArtists({time_range:c.detail.value}))}]}class it extends X{constructor(e){super();Q(this,e,et,xe,Z,{})}}export{it as default};
