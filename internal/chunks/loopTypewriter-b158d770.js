import{t as l,r as c,w as m}from"./writeEffect-e90d86a1.js";import{as as f}from"./vendor-cee53150.js";import"./sleep-2a65a24a.js";const d=async(t,e)=>{e.dispatch("done"),await l(typeof e.loop=="number"?e.loop:1500);const n=t.innerHTML.replaceAll("&amp;","&");for(let a=n.length-1;a>=0;a--)n[a]===">"&&(a=n.lastIndexOf("<",a)),t.innerHTML=n.slice(0,a),await l(e.interval)};let i=[];const p=t=>{for(;;){const e=c(0,t.length),n=typeof i=="number"&&e!==i,a=Array.isArray(i)&&!i.includes(e);if(t.length===1||a||n)return n&&(i=[]),i.push(e),t[e];i.length===t.length&&(i=i.pop())}},o=async({currentNode:t,text:e},n)=>{await m({currentNode:t,text:e},n);const a=e.replaceAll("&","&amp;");t.innerHTML===a&&await d(t,n),f(t,n.parentElement,r=>{t===r?r.classList.remove("typing"):r.classList.remove("finished-typing")})},T=async(t,e)=>{for(;;)if(e.loop)for(const n of t)await o(n,e);else if(e.loopRandom){const n=p(t);await o(n,e)}};export{T as mode};
