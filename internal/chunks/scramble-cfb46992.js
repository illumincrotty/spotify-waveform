import{sleep as b}from"./sleep-2a65a24a.js";import{as as f}from"./vendor-cee53150.js";const i=(t,e)=>Math.floor(Math.random()*(e-t))+t,w=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=t.length,s=i(0,e);return t[s]},g=(t,e)=>{const s=e/3;return t.map(()=>i(s,e-100))},M=async(t,e)=>{const s=typeof e.scramble=="number"?e.scramble:3e3;await new Promise(a=>{t.forEach(async({currentNode:m,text:r})=>{let o=r.split("");const h=g(o,s),c=Date.now();for(f(m,e.parentElement,n=>{n.classList.add("finished-typing")});Date.now()-c<s;){const n=i(0,o.length),u=h[n],L=o[n]===" ",d=()=>Date.now()-c;if((()=>d()>=u)()||L)if(!(o[n]===r[n]))o[n]=r[n];else continue;else o[n]=w();const l=o.join("");m.innerHTML=l;const p=l===r,T=e.scrambleSlowdown?Math.round(d()/100):1;if(await b(T),p){a();break}}})}),e.dispatch("done")};export{M as mode};
